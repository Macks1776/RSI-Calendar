import{top,left,right,bottom}from"../enums.js";import getOffsetParent from"../dom-utils/getOffsetParent.js";import getWindow from"../dom-utils/getWindow.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import getComputedStyle from"../dom-utils/getComputedStyle.js";import getBasePlacement from"../utils/getBasePlacement.js";import{round}from"../utils/math.js";var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t){var e=t.x,o=t.y,t=window.devicePixelRatio||1;return{x:round(round(e*t)/t)||0,y:round(round(o*t)/t)||0}}function mapToStyles(t){var e=t.popper,o=t.popperRect,s=t.placement,p=t.offsets,r=t.position,i=t.gpuAcceleration,a=t.adaptive,n=t.roundOffsets,l=!0===n?roundOffsetsByDPR(p):"function"==typeof n?n(p):p,m=l.x,f=void 0===m?0:m,d=l.y,u=void 0===d?0:d,c=p.hasOwnProperty("x"),g=p.hasOwnProperty("y"),t=left,n=top,m=window;a&&(l="clientHeight",d="clientWidth",(p=getOffsetParent(e))===getWindow(e)&&(p=getDocumentElement(e),"static"!==getComputedStyle(p).position&&(l="scrollHeight",d="scrollWidth")),s===top&&(n=bottom,u-=p[l]-o.height,u*=i?1:-1),s===left&&(t=right,f-=p[d]-o.width,f*=i?1:-1));var a=Object.assign({position:r},a&&unsetSides);return i?Object.assign({},a,((i={})[n]=g?"0":"",i[t]=c?"0":"",i.transform=(m.devicePixelRatio||1)<2?"translate("+f+"px, "+u+"px)":"translate3d("+f+"px, "+u+"px, 0)",i)):Object.assign({},a,((a={})[n]=g?u+"px":"",a[t]=c?f+"px":"",a.transform="",a))}function computeStyles(t){var e=t.state,o=t.options,s=o.gpuAcceleration,t=void 0===s||s,s=o.adaptive,s=void 0===s||s,o=o.roundOffsets,o=void 0===o||o,t={placement:getBasePlacement(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:t};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},t,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:o})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},t,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}export default{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};export{mapToStyles};