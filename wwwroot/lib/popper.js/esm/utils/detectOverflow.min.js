import getBoundingClientRect from"../dom-utils/getBoundingClientRect.js";import getClippingRect from"../dom-utils/getClippingRect.js";import getDocumentElement from"../dom-utils/getDocumentElement.js";import computeOffsets from"./computeOffsets.js";import rectToClientRect from"./rectToClientRect.js";import{clippingParents,reference,popper,bottom,top,right,basePlacements,viewport}from"../enums.js";import{isElement}from"../dom-utils/instanceOf.js";import mergePaddingObject from"./mergePaddingObject.js";import expandToHashMap from"./expandToHashMap.js";export default function detectOverflow(e,t){var n,o=t=void 0===t?{}:t,p=o.placement,r=void 0===p?e.placement:p,i=o.boundary,m=void 0===i?clippingParents:i,s=o.rootBoundary,c=void 0===s?viewport:s,l=o.elementContext,t=void 0===l?popper:l,p=o.altBoundary,i=void 0!==p&&p,s=o.padding,l=void 0===s?0:s,p=mergePaddingObject("number"!=typeof l?l:expandToHashMap(l,basePlacements)),o=t===popper?reference:popper,s=e.elements.reference,l=e.rects.popper,o=e.elements[i?o:t],m=getClippingRect(isElement(o)?o:o.contextElement||getDocumentElement(e.elements.popper),m,c),c=getBoundingClientRect(s),s=computeOffsets({reference:c,element:l,strategy:"absolute",placement:r}),s=rectToClientRect(Object.assign({},l,s)),c=t===popper?s:c,a={top:m.top-c.top+p.top,bottom:c.bottom-m.bottom+p.bottom,left:m.left-c.left+p.left,right:c.right-m.right+p.right},e=e.modifiersData.offset;return t===popper&&e&&(n=e[r],Object.keys(a).forEach(function(e){var t=0<=[right,bottom].indexOf(e)?1:-1,o=0<=[top,bottom].indexOf(e)?"y":"x";a[e]+=n[o]*t})),a}