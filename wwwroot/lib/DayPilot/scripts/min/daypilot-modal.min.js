/*
DayPilot Lite
Copyright (c) 2005 - 2021 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 2021.2.261-lite
*/
"undefined"==typeof DayPilot&&(DayPilot={}),function(DayPilot){"use strict";function e(t,i,a){var n=i.indexOf(".");if(n===-1)return void("__proto__"!==i&&"constructor"!==i&&(t[i]=a));var o=i.substring(0,n);if("__proto__"!==o&&"constructor"!==o){var l=i.substring(n+1),d=t[o];"object"==typeof d&&null!==d||(t[o]={},d=t[o]),e(d,l,a)}}function t(e,i,a){i=i||{},a=a||"";for(var n in e){var o=e[n];"object"==typeof o?"[object Array]"===Object.prototype.toString.call(o)?i[a+n]=o:o&&o.toJSON?i[a+n]=o.toJSON():t(o,i,a+n+"."):i[a+n]=o}return i}if(!DayPilot.ModalStatic){DayPilot.ModalStatic={},DayPilot.ModalStatic.list=[],DayPilot.ModalStatic.hide=function(){if(this.list.length>0){var e=this.list.pop();e&&e.hide()}},DayPilot.ModalStatic.remove=function(e){for(var t=DayPilot.ModalStatic.list,i=0;i<t.length;i++)if(t[i]===e)return void t.splice(i,1)},DayPilot.ModalStatic.close=function(e){DayPilot.ModalStatic.result(e),DayPilot.ModalStatic.hide()},DayPilot.ModalStatic.result=function(e){var t=DayPilot.ModalStatic.list;t.length>0&&(t[t.length-1].result=e)},DayPilot.ModalStatic.displayed=function(e){for(var t=DayPilot.ModalStatic.list,i=0;i<t.length;i++)if(t[i]===e)return!0;return!1},DayPilot.ModalStatic.stretch=function(){if(this.list.length>0){var e=this.list[this.list.length-1];e&&e.stretch()}},DayPilot.ModalStatic.last=function(){var e=DayPilot.ModalStatic.list;return e.length>0?e[e.length-1]:null};var i=function(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.styleSheet||e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e);var t=!!e.styleSheet,i={};return i.rules=[],i.commit=function(){try{t&&(e.styleSheet.cssText=this.rules.join("\n"))}catch(e){}},i.add=function(i,a,n){if(t)return void this.rules.push(i+"{"+a+"}");if(e.sheet.insertRule)"undefined"==typeof n&&(n=e.sheet.cssRules.length),e.sheet.insertRule(i+"{"+a+"}",n);else{if(!e.sheet.addRule)throw"No CSS registration method found";e.sheet.addRule(i,a,n)}},i},a=new i;a.add(".modal_default_main","border: 10px solid #ccc; max-width: 90%;"),a.add(".modal_default_main:focus","outline: none;"),a.add(".modal_default_content","padding: 10px 0px;"),a.add(".modal_default_inner","padding: 20px;"),a.add(".modal_default_input","padding: 10px 0px;"),a.add(".modal_default_buttons","margin-top: 10px;"),a.add(".modal_default_buttons","padding: 10px 0px;"),a.add(".modal_default_form_item","padding: 10px 0px; position: relative;"),a.add(".modal_default_form_item_level1","border-left: 2px solid #ccc; margin-left: 10px; padding-left: 20px;"),a.add(".modal_default_form_item.modal_default_form_title","font-size: 1.5rem; font-weight: bold;"),a.add(".modal_default_form_item input[type=text]","width: 100%; box-sizing: border-box;"),a.add(".modal_default_form_item textarea","width: 100%; height: 200px; box-sizing: border-box;"),a.add(".modal_default_form_item input[type=select]","width: 100%; box-sizing: border-box;"),a.add(".modal_default_form_item label","display: block;"),a.add(".modal_default_form_item select","width: 100%; box-sizing: border-box;"),a.add(".modal_default_form_item_label","margin: 2px 0px;"),a.add(".modal_default_form_item_image img","max-width: 100%; height: auto;"),a.add(".modal_default_form_item_invalid",""),a.add(".modal_default_form_item_invalid_message","position: absolute; right: 0px; top: 9px; background-color: red; color: #ffffff; padding: 2px; border-radius: 2px;"),a.add(".modal_default_background","opacity: 0.5; background-color: #000;"),a.add(".modal_default_ok","padding: 3px; width: 80px;"),a.add(".modal_default_cancel","padding: 3px; width: 80px;"),a.add(".modal_default_form_item_date","position: relative;"),a.add(".modal_default_form_item_date:after","content: ''; position: absolute; right: 7px; top: 50%; margin-top: 3px; width: 10px; height: 15px; background-image:url("+"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjM4MDM3MzM2O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDE5MjgiCiAgICAgICB3aWR0aD0iOS45MTUzMDYxIgogICAgICAgaGVpZ2h0PSIxMS4zNjkzNyIKICAgICAgIHg9IjAuMTE3MTg3NSIKICAgICAgIHk9Ii0zLjAwOTk5NTciCiAgICAgICByeT0iMS4zMTE4NTA1IiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNjY2NjY2M7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNTk4MTQwMTI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MTkzMCIKICAgICAgIHdpZHRoPSIxLjUzNDQxMzYiCiAgICAgICBoZWlnaHQ9IjIuMjE5ODI1IgogICAgICAgeD0iMi4xNTU4NDgzIgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHJ5PSIwLjY3MTc4OTE3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iMS41MjM5NTA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QxOTQ4IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjY3MTc4OTE3IgogICAgICAgeT0iLTQuMzkzNzAwMSIKICAgICAgIHg9IjYuNDUyNzIzNSIKICAgICAgIGhlaWdodD0iMi4yMTk4MjUiCiAgICAgICB3aWR0aD0iMS41MzQ0MTM2IgogICAgICAgaWQ9InJlY3QyMDAzIgogICAgICAgc3R5bGU9ImZpbGw6I2NjY2NjYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS41OTgxNDAxMjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAwNSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIHk9Ii0xLjE2NTg0NjYiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSItMS4xNjU4NDY2IgogICAgICAgeD0iNi45OTI3MDA2IgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDA3IgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHJlY3QKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGlkPSJyZWN0MjAxMyIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHg9IjEuNTIzOTUwNiIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHJ5PSIwLjI5NjAxNDciIC8+CiAgICA8cmVjdAogICAgICAgcnk9IjAuMjk2MDE0NyIKICAgICAgIHk9IjEuODAyOTAzNCIKICAgICAgIHg9IjQuMjE5MjYzMSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGlkPSJyZWN0MjAxNSIKICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjEuNDIxODkxOTM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KICAgIDxyZWN0CiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBpZD0icmVjdDIwMTciCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB4PSI2Ljk5MjcwMDYiCiAgICAgICB5PSIxLjgwMjkwMzQiCiAgICAgICByeT0iMC4yOTYwMTQ3IiAvPgogICAgPHJlY3QKICAgICAgIHJ5PSIwLjI5NjAxNDciCiAgICAgICB5PSI0LjczMjU5MDciCiAgICAgICB4PSIxLjU2MzAxMzEiCiAgICAgICBoZWlnaHQ9IjEuODI5OTA5MSIKICAgICAgIHdpZHRoPSIxLjgzNDIyNTEiCiAgICAgICBpZD0icmVjdDIwMTkiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxLjQyMTg5MTkzO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+CiAgICA8cmVjdAogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgICAgaWQ9InJlY3QyMDIxIgogICAgICAgd2lkdGg9IjEuODM0MjI1MSIKICAgICAgIGhlaWdodD0iMS44Mjk5MDkxIgogICAgICAgeD0iNC4yNTgzMjU2IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgcnk9IjAuMjk2MDE0NyIgLz4KICAgIDxyZWN0CiAgICAgICByeT0iMC4yOTYwMTQ3IgogICAgICAgeT0iNC43MzI1OTA3IgogICAgICAgeD0iNy4wMzE3NjMxIgogICAgICAgaGVpZ2h0PSIxLjgyOTkwOTEiCiAgICAgICB3aWR0aD0iMS44MzQyMjUxIgogICAgICAgaWQ9InJlY3QyMDIzIgogICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MS40MjE4OTE5MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDwvZz4KPC9zdmc+Cg=="+")"),navigator.userAgent.indexOf("Edge")!==-1&&a.add(".modal_default_form_item_date input::-ms-clear","display: none;"),a.add(".modal_default_form_item_scrollable_scroll","width: 100%; height: 200px; box-sizing: border-box; border: 1px solid #ccc; overflow-y: auto;"),a.add(".modal_default_form_item_scrollable_scroll_content","padding: 5px;"),a.add(".modal_default_form_item_searchable","position: relative;"),a.add(".modal_default_form_item_searchable_icon",""),a.add(".modal_default_form_item_searchable_icon:after","content:''; position: absolute; right: 5px; top: 50%; margin-top: -8px; width: 10px; height: 15px; background-image:url("+"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB3aWR0aD0iMTAiCiAgIGhlaWdodD0iMTUiCj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDUpIj4KICAgIDxwYXRoCiAgICAgICBpZD0icGF0aDMxNzMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojOTk5OTk5O3N0cm9rZS13aWR0aDoxLjg1MTk2ODUzO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZSIKICAgICAgIGQ9Ik0gMC45NTQxNDgzOCwwLjY4MTYwMzEgNS4wMzkwNjI1LDUuNDExNTM4NiA5LjEyMzk3NjYsMC42ODE2MDMxIgogICAgICAgIC8+CiAgPC9nPgo8L3N2Zz4K"+");"),a.add(".modal_default_form_item_searchable_list","box-sizing: border-box; border: 1px solid #999; max-height: 150px; overflow-y: auto;"),a.add(".modal_default_form_item_searchable_list_item","background: white; padding: 2px; cursor: default;"),a.add(".modal_default_form_item_searchable_list_item_highlight","background: #ccc;"),a.add(".modal_default_form_item_tabular_main","margin-top: 10px;"),a.add(".modal_default_form_item_tabular_table","display: table; width: 100%; xbackground-color: #fff; border-collapse: collapse;"),a.add(".modal_default_form_item_tabular_tbody","display: table-row-group;"),a.add(".modal_default_form_item_tabular_row","display: table-row;"),a.add(".modal_default_form_item_tabular_row.modal_default_form_item_tabular_header",""),a.add(".modal_default_form_item_tabular_cell.modal_default_form_item_tabular_rowaction","padding: 0px; width: 23px;"),a.add(".modal_default_form_item_tabular_cell","display: table-cell; border: 0px; padding: 2px 2px 2px 0px; cursor: default; vertical-align: bottom;"),a.add(".modal_default_form_item_tabular_header .modal_default_form_item_tabular_cell","padding-left: 0px; padding-bottom: 0px;"),a.add(".modal_default_form_item_tabular_table input[type=text], .modal_default_form_item_tabular_table input[type=number]","width:100%; box-sizing: border-box;"),a.add(".modal_default_form_item_tabular_table select","width:100%; height:100%; box-sizing: border-box;"),a.add(".modal_default_form_item_tabular_plus","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),a.add(".modal_default_form_item_tabular_plus:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSA1LjAgMC41IEwgNS4wIDkuNSBNIDAuNSA1LjAgTCA5LjUgNS4wJyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),a.add(".modal_default_form_item_tabular_delete","display: inline-block; background-color: #ccc; color: white; width: 20px; height: 20px; border-radius: 10px; box-sizing: border-box; position: relative; margin-left: 3px; margin-top: 3px; cursor: pointer;"),a.add(".modal_default_form_item_tabular_delete:after","content: ''; position: absolute; left: 5px; top: 5px; width: 10px; height: 10px;   background-image: url(\"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PHBhdGggZD0nTSAwLjUgMC41IEwgOS41IDkuNSBNIDAuNSA5LjUgTCA5LjUgMC41JyBzdHlsZT0nZmlsbDpub25lO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbGluZWNhcDpidXR0JyAvPjwvc3ZnPg==\")"),a.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_plus","display: none;"),a.add(".modal_default_form_item_tabular_plus_max.modal_default_form_item_tabular_plus","display: none;"),a.add(".modal_default_form_item_tabular_disabled .modal_default_form_item_tabular_delete","visibility: hidden;"),a.add(".modal_default_form_item_tabular_empty","height: 1px; margin: 5px 23px 5px 0px; background-color: #ccc;"),a.add(".modal_default_form_item_tabular_spacer .modal_default_form_item_tabular_cell","padding: 0px;"),a.add(".modal_min_main","border: 1px solid #ccc; max-width: 90%;"),a.add(".modal_min_background","opacity: 0.5; background-color: #000;"),a.add(".modal_min_ok","padding: 3px 10px;"),a.add(".modal_min_cancel","padding: 3px 10px;"),a.add(".navigator_modal_main","border-left: 1px solid #c0c0c0;border-right: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;background-color: white;color: #000000; box-sizing: content-box;"),a.add(".navigator_modal_main *, .navigator_modal_main *:before, .navigator_modal_main *:after","box-sizing: content-box;"),a.add(".navigator_modal_month","font-size: 11px;"),a.add(".navigator_modal_day","color: black;"),a.add(".navigator_modal_weekend","background-color: #f0f0f0;"),a.add(".navigator_modal_dayheader","color: black;"),a.add(".navigator_modal_line","border-bottom: 1px solid #c0c0c0;"),a.add(".navigator_modal_dayother","color: gray;"),a.add(".navigator_modal_todaybox","border: 1px solid red;"),a.add(".navigator_modal_title, .navigator_modal_titleleft, .navigator_modal_titleright","border-top: 1px solid #c0c0c0;border-bottom: 1px solid #c0c0c0;color: #333;background: #f3f3f3;"),a.add(".navigator_modal_busy","font-weight: bold;"),a.add(".navigator_modal_cell","text-align: center;"),a.add(".navigator_modal_select .navigator_modal_cell_box","background-color: #FFE794; opacity: 0.5;"),a.add(".navigator_modal_title","text-align: center;"),a.add(".navigator_modal_titleleft, .navigator_modal_titleright","text-align: center;"),a.add(".navigator_modal_dayheader","text-align: center;"),a.add(".navigator_modal_weeknumber","text-align: center;"),a.add(".navigator_modal_cell_text","cursor: pointer;"),a.commit(),DayPilot.Modal=function(e){this.autoFocus=!0,this.focus=null,this.autoStretch=!0,this.autoStretchFirstLoadOnly=!1,this.className=null,this.theme="modal_default",this.disposeOnClose=!0,this.dragDrop=!0,this.loadingHtml=null,this.maxHeight=null,this.scrollWithPage=!0,this.useIframe=!0,this.zIndex=99999,this.left=null,this.width=600,this.top=20,this.height=200,this.locale=null,this.closed=null,this.onClose=null,this.onClosed=null,this.onShow=null;var t=this;this.id="_"+(new Date).getTime()+"n"+10*Math.random(),this.a=!1,this.b=null,this.c=null,this.showHtml=function(e){if(DayPilot.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";if(this.div||this.d(),this.e(),this.useIframe){var t=function(e,t){return function(){e.setInnerHTML(e.id+"iframe",t)}};window.setTimeout(t(this,e),0)}else e.nodeType?this.div.appendChild(e):this.div.innerHTML=e;this.e(),this.f(),this.g()},this.showUrl=function(e){if(DayPilot.ModalStatic.displayed(this))throw"This modal dialog is already displayed.";if(this.useIframe){this.div||this.d();var i=this.loadingHtml;i&&(this.iframe.src="about:blank",this.setInnerHTML(this.id+"iframe",i)),this.re(this.iframe,"load",this.h),this.iframe.src=e,this.e(),this.f(),this.g()}else t.i({"url":e,"success":function(e){var i=e.request.responseText;t.showHtml(i)},"error":function(e){t.showHtml("Error loading the modal dialog")}})},this.g=function(){if("function"==typeof t.onShow){var e={};e.root=t.j(),e.modal=t,t.onShow(e)}},this.j=function(){return t.iframe?t.iframe.contentWindow.document:t.div},this.i=function(e){var t=new XMLHttpRequest;if(t){var i=e.method||"GET",a=e.success||function(){},n=e.error||function(){},o=e.data,l=e.url;t.open(i,l,!0),t.setRequestHeader("Content-type","text/plain"),t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status||304===t.status){var e={};e.request=t,a(e)}else if(n){var e={};e.request=t,n(e)}else window.console&&console.log("HTTP error "+t.status)},4!==t.readyState&&("object"==typeof o&&(o=JSON.stringify(o)),t.send(o))}},this.e=function(){delete this.result;var e=window,i=document,a=e.pageYOffset?e.pageYOffset:i.documentElement&&i.documentElement.scrollTop?i.documentElement.scrollTop:i.body.scrollTop;this.theme&&(this.hideDiv.className=this.theme+"_background"),this.zIndex&&(this.hideDiv.style.zIndex=this.zIndex),this.hideDiv.style.display="",window.setTimeout(function(){t.hideDiv&&(t.hideDiv.onclick=function(){t.hide({"backgroundClick":!0})})},500),this.theme?this.div.className=this.theme+"_main":this.div.className="",this.className&&(this.div.className+=" "+this.className),this.left?this.div.style.left=this.left+"px":this.div.style.marginLeft="-"+Math.floor(this.width/2)+"px",this.div.style.position="absolute",this.div.style.boxSizing="content-box",this.div.style.top=a+this.top+"px",this.div.style.width=this.width+"px",this.zIndex&&(this.div.style.zIndex=this.zIndex),this.height&&(this.useIframe||!this.autoStretch?this.div.style.height=this.height+"px":this.div.style.height=""),this.useIframe&&this.height&&(this.iframe.style.height=this.height+"px"),this.div.style.display="",this.l(),DayPilot.ModalStatic.remove(this),DayPilot.ModalStatic.list.push(this)},this.h=function(){t.iframe.contentWindow.modal=t,t.autoStretch&&t.stretch()},this.stretch=function(){var e=function(){return t.k().y},i=function(){return t.k().x};if(this.useIframe){for(var a=i()-40,n=this.width;n<a&&this.m();n+=10)this.div.style.width=n+"px",this.div.style.marginLeft="-"+Math.floor(n/2)+"px";for(var o=this.maxHeight||e()-2*this.top,l=this.height;l<o&&this.n();l+=10)this.iframe.style.height=l+"px",this.div.style.height=l+"px";this.autoStretchFirstLoadOnly&&this.ue(this.iframe,"load",this.h)}else this.div.style.height=""},this.m=function(){for(var e=this.iframe.contentWindow.document,t="BackCompat"===e.compatMode?e.body:e.documentElement,i=t.scrollWidth,a=e.body.children,n=0;n<a.length;n++){var o=a[n].offsetLeft+a[n].offsetWidth;i=Math.max(i,o)}return i>t.clientWidth},this.n=function(){for(var e=this.iframe.contentWindow.document,t="BackCompat"===e.compatMode?e.body:e.documentElement,i=t.scrollHeight,a=e.body.children,n=0;n<a.length;n++){var o=a[n].offsetTop+a[n].offsetHeight;i=Math.max(i,o)}return i>t.clientHeight},this.k=function(){var e=document;if("CSS1Compat"===e.compatMode&&e.documentElement&&e.documentElement.clientWidth){var t=e.documentElement.clientWidth,i=e.documentElement.clientHeight;return{x:t,y:i}}var t=e.body.clientWidth,i=e.body.clientHeight;return{x:t,y:i}},this.f=function(){this.a||(this.re(window,"resize",this.o),this.re(window,"scroll",this.p),this.dragDrop&&(this.re(document,"mousemove",this.q),this.re(document,"mouseup",this.r)),this.a=!0)},this.s=function(){this.ue(window,"resize",this.o),this.ue(window,"scroll",this.p),this.dragDrop&&(this.ue(document,"mousemove",this.q),this.ue(document,"mouseup",this.r)),this.a=!1},this.t=function(e){e.target===t.div&&(e.preventDefault(),t.div.style.cursor="move",t.u(),t.c=t.mc(e||window.event),t.b={x:t.div.offsetLeft,y:t.div.offsetTop})},this.q=function(e){if(t.c){var e=e||window.event,i=t.mc(e),a=i.x-t.c.x,n=i.y-t.c.y;t.div.style.marginLeft="0px",t.div.style.top=t.b.y+n+"px",t.div.style.left=t.b.x+a+"px"}},this.r=function(e){t.c&&(t.v(),t.div.style.cursor=null,t.c=null)},this.u=function(){if(this.useIframe){var e=document.createElement("div");e.style.backgroundColor="#ffffff",e.style.filter="alpha(opacity=80)",e.style.opacity="0.80",e.style.width="100%",e.style.height=this.height+"px",e.style.position="absolute",e.style.left="0px",e.style.top="0px",this.div.appendChild(e),this.mask=e}},this.v=function(){this.useIframe&&(this.div.removeChild(this.mask),this.mask=null)},this.o=function(){t.w(),t.l()},this.p=function(){t.w()},this.l=function(){if(!t.left&&t.div){var e=t.div.offsetWidth;t.div.style.marginLeft="-"+Math.floor(e/2)+"px"}},this.w=function(){if(t.hideDiv&&t.div&&"none"!==t.hideDiv.style.display&&"none"!==t.div.style.display){var e=t.z.scrollY();t.scrollWithPage||(t.div.style.top=e+t.top+"px")}},this.z={},this.z.container=function(){return t.container||document.body},this.z.scrollY=function(){var e=t.z.container();return e===document.body?window.pageYOffset?window.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop:e.scrollTop},this.re=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},this.ue=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent&&e.detachEvent("on"+t,i)},this.mc=function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}},this.abs=function(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e.offsetParent;)e=e.offsetParent,t.x+=e.offsetLeft,t.y+=e.offsetTop;return t},this.d=function(){var e=t.z.container(),i=e===document.body,a=i?"fixed":"absolute",n=document.createElement("div");n.id=this.id+"hide",n.style.position=a,n.style.left="0px",n.style.top="0px",n.style.right="0px",n.style.bottom="0px",n.oncontextmenu=function(){return!1},n.onmousedown=function(){return!1},e.appendChild(n);var o=document.createElement("div");o.id=this.id+"popup",o.style.position=a,o.style.left="50%",o.style.top="0px",o.style.backgroundColor="white",o.style.width="50px",o.style.height="50px",this.dragDrop&&(o.onmousedown=this.t),o.addEventListener("keydown",function(e){e.stopPropagation()});var l=null;this.useIframe&&(l=document.createElement("iframe"),l.id=this.id+"iframe",l.name=this.id+"iframe",l.frameBorder="0",l.style.width="100%",l.style.height="50px",o.appendChild(l)),e.appendChild(o),this.div=o,this.iframe=l,this.hideDiv=n},this.setInnerHTML=function(e,i){var a=window.frames[e],n=a.contentWindow||a.document||a.contentDocument;n.document&&(n=n.document),null==n.body&&n.write("<body></body>"),i.nodeType?n.body.appendChild(i):n.body.innerHTML=i,t.autoStretch&&(t.autoStretchFirstLoadOnly&&t.A||(t.stretch(),t.A=!0))},this.close=function(e){this.result=e,this.hide()},this.closeSerialized=function(){for(var e=t.j(),i=e.querySelectorAll("input, textarea, select"),a={},n=0;n<i.length;n++){var o=i[n],l=o.name;if(l){var d=o.value;a[l]=d}}t.close(a)},this.hide=function(e){e=e||{};var i={};i.backgroundClick=!!e.backgroundClick,i.result=this.result,i.canceled="undefined"==typeof this.result,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof this.onClose&&(this.onClose(i),i.preventDefault.value)||(this.div&&(this.div.style.display="none",this.hideDiv.style.display="none",this.useIframe||(this.div.innerHTML=null)),window.focus(),DayPilot.ModalStatic.remove(this),"function"==typeof this.onClosed?this.onClosed(i):this.closed&&this.closed(),delete this.result,this.disposeOnClose&&(t.s(),t.B(t.div),t.B(t.hideDiv),t.div=null,t.hideDiv=null,t.iframe=null))},this.B=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},this.C=function(){if(e)for(var t in e)this[t]=e[t]},this.C()},DayPilot.Modal.alert=function(e,t){t=t||{},t.height=t.height||40,t.useIframe=!1;var i=t.okText||"OK";t.cancelText||"Cancel";return DayPilot.getPromise(function(a,n){t.onClosed=function(e){a(e)};var o=new DayPilot.Modal(t),l=document.createElement("div");l.className=o.theme+"_inner";var d=document.createElement("div");d.className=o.theme+"_content",d.innerHTML=e;var r=document.createElement("div");r.className=o.theme+"_buttons";var s=document.createElement("button");s.innerText=i,s.className=o.theme+"_ok",s.onclick=function(e){DayPilot.ModalStatic.close("OK")},r.appendChild(s),l.appendChild(d),l.appendChild(r),o.showHtml(l),o.autoFocus&&s.focus()})},DayPilot.Modal.confirm=function(e,t){t=t||{},t.height=t.height||40,t.useIframe=!1;var i=t.okText||"OK",a=t.cancelText||"Cancel";return DayPilot.getPromise(function(n,o){t.onClosed=function(e){n(e)};var l=new DayPilot.Modal(t),d=document.createElement("div");d.className=l.theme+"_inner";var r=document.createElement("div");r.className=l.theme+"_content",r.innerHTML=e;var s=document.createElement("div");s.className=l.theme+"_buttons";var c=document.createElement("button");c.innerText=i,c.className=l.theme+"_ok",c.onclick=function(e){DayPilot.ModalStatic.close("OK")};var u=document.createTextNode(" "),m=document.createElement("button");m.innerText=a,m.className=l.theme+"_cancel",m.onclick=function(e){DayPilot.ModalStatic.close()},s.appendChild(c),s.appendChild(u),s.appendChild(m),d.appendChild(r),d.appendChild(s),l.showHtml(d),l.autoFocus&&c.focus()})},DayPilot.Modal.prompt=function(e,t,i){"object"==typeof t&&(i=t,t=""),i=i||{},i.height=i.height||40,i.useIframe=!1;var a=i.okText||"OK",n=i.cancelText||"Cancel",o=t||"";return DayPilot.getPromise(function(t,l){i.onClosed=function(e){t(e)};var d=new DayPilot.Modal(i),r=document.createElement("div");r.className=d.theme+"_inner";var s=document.createElement("div");s.className=d.theme+"_content",s.innerHTML=e;var c=document.createElement("div");c.className=d.theme+"_input";var u=document.createElement("input");u.value=o,u.style.width="100%",u.onkeydown=function(e){var t=!1;switch(e.keyCode){case 13:d.close(this.value);break;case 27:d.close();break;default:t=!0}t||(e.preventDefault(),e.stopPropagation())},c.appendChild(u);var m=document.createElement("div");m.className=d.theme+"_buttons";var h=document.createElement("button");h.innerText=a,h.className=d.theme+"_ok",h.onclick=function(e){d.close(u.value)};var p=document.createTextNode(" "),f=document.createElement("button");f.innerText=n,f.className=d.theme+"_cancel",f.onclick=function(e){d.close()},m.appendChild(h),m.appendChild(p),m.appendChild(f),r.appendChild(s),r.appendChild(c),r.appendChild(m),d.showHtml(r),d.autoFocus&&u.focus()})};var n=function(e){return"[object Array]"===Object.prototype.toString.call(e)};DayPilot.Modal.form=function(t,i,a){if(1===arguments.length){var l=t;if(n(l))i={};else{if("object"!=typeof l)throw"Invalid DayPilot.Modal.form() parameter";i=t,t=[];for(var d in i){var r={};r.name=d,r.id=d,t.push(r)}}}var s={};for(var d in a)s[d]=a[d];s.height=s.height||40,s.useIframe=!1;var c=s.okText||"OK",u=s.cancelText||"Cancel";return DayPilot.getPromise(function(a,n){s.onClosed=function(t){if(t.result){var n=JSON.parse(JSON.stringify(i));for(var o in t.result)e(n,o,t.result[o]);t.result=n}a(t)};var l=new DayPilot.Modal(s),d=document.createElement("div");d.className=l.theme+"_inner";var r=document.createElement("div");r.className=l.theme+"_input";var m=new o({theme:l.theme,form:t,data:i,zIndex:l.zIndex,locale:l.locale,plugins:l.plugins,onKey:function(e){switch(e.key){case"Enter":m.validate()&&l.close(m.serialize());break;case"Escape":l.close()}},onChange:function(e){"function"==typeof l.onChange&&l.onChange(e)}}),h=m.create();r.append(h);var p=document.createElement("div");p.className=l.theme+"_buttons";var f=document.createElement("button");f.innerText=c,f.className=l.theme+"_ok",s.okDisabled&&(f.disabled=!0),f.onclick=function(e){m.validate()&&l.close(m.serialize())};var v=document.createTextNode(" "),g=document.createElement("button");if(g.innerText=u,g.className=l.theme+"_cancel",g.onclick=function(e){l.close()},g.onmousedown=function(e){m.canceling=!0},p.appendChild(f),p.appendChild(v),p.appendChild(g),d.appendChild(r),d.appendChild(p),l.showHtml(d),l.div.setAttribute("tabindex","-1"),l.div.addEventListener("keydown",function(e){switch(e.keyCode){case 27:l.close();break;case 13:m.validate()&&l.close(m.serialize())}}),l.focus){var b=null;if("object"==typeof l.focus){var y=l.focus.id,I=l.focus.value;b=m.findViewById(y,I)}else"string"==typeof l.focus&&(b=m.findViewById(l.focus));b&&b.focus()}else{var _=m.firstFocusable();l.autoFocus&&_?_.focus():l.div.focus()}})},DayPilot.Modal.close=function(e){var t=DayPilot.Modal.opener();t&&t.close(e)},DayPilot.Modal.stretch=function(e){var t=DayPilot.Modal.opener();if(!t)throw"Unable to find the opener DayPilot.Modal instance.";t.stretch()},DayPilot.Modal.closeSerialized=function(){var e=DayPilot.Modal.opener()||DayPilot.ModalStatic.last();e&&e.closeSerialized()},DayPilot.Modal.opener=function(){return"undefined"!=typeof DayPilot&&"undefined"!=typeof DayPilot.ModalStatic&&DayPilot.ModalStatic.list.length>0?DayPilot.ModalStatic.list[DayPilot.ModalStatic.list.length-1]:parent&&parent.DayPilot&&parent.DayPilot.ModalStatic&&parent.DayPilot.ModalStatic.list[parent.DayPilot.ModalStatic.list.length-1]},DayPilot.Modal.Experimental={},DayPilot.Modal.Experimental.Form=o,"undefined"==typeof DayPilot.getPromise&&(DayPilot.getPromise=function(e){return"undefined"!=typeof Promise?new Promise(e):(DayPilot.Promise=function(e){var t=this;this.then=function(t,i){return t=t||function(){},i=i||function(){},e(t,i),DayPilot.getPromise(e)},this["catch"]=function(i){return t.then(null,i),DayPilot.getPromise(e)}},new DayPilot.Promise(e))});var o=function(e){this.form=[],this.data={},this.theme="form_default",this.zIndex=99999,this.locale="en-us",this.plugins={},this.onKey=null,this.D=[],this.E=null,this.canceling=!1,this.F=[],this.G=[],this.H=null,e=e||{};for(var t in e)this[t]=e[t]};o.prototype.create=function(){return this.load(),this.render(),this.H},o.prototype.render=function(){var e=this;this.H=document.createElement("div"),this.D.forEach(function(t){e.createView(t)}),this.applyState()},o.prototype.createView=function(e){var t=this.theme,i=this,a=document.createElement("div");if(a.className=t+"_form_item "+t+"_form_item_level"+e.level,e.interactive||"title"!==e.type?a.className+=" "+t+"_form_item_"+e.type:a.className+=" "+t+"_form_title",e.data.cssClass&&(a.className+=" "+e.data.cssClass),!e.isValue){var n=document.createElement("div");n.className=t+"_form_item_label",n.innerText=e.text,a.appendChild(n)}var o=this.createInteractive(e);o.onInput=function(e){if(e=e||{},i.I(o,{"debounce":!e.immediate}),"function"==typeof i.onChange){var t={};t.result=i.serialize(),i.onChange(t)}},o.onBlur=function(){i.canceling||i.I(o)},o.apply(e),o.H=a,o.row=e,o.element&&a.appendChild(o.element),this.G.push(o),this.H.appendChild(a)},o.prototype.validate=function(){var e=this,t=!0;return this.G.forEach(function(i){var a=e.I(i);t=t&&a}),t},o.prototype.I=function(e,t){function i(){e.J&&(e.J.remove(),e.J=null),e.H.classList.add(u);var t=document.createElement("div");
t.classList.add(m),t.innerText=c.message,e.J=t,e.H.appendChild(t)}t=t||{};var a=t.debounce,n=t.silent,o=e.row,l=!0,d="function"==typeof o.data.onValidate?o.data.onValidate:null,r="function"==typeof o.data.validate?o.data.validate:null,s=d||r;if(s){var c={};c.valid=!0,c.value=e.save()[o.field],c.message="Error",c.values=this.serialize(),c.result=this.serialize(),s(c);var u=this.theme+"_form_item_invalid",m=this.theme+"_form_item_invalid_message";if(c.valid)clearTimeout(this.F[o.field]),e.J&&(e.J.remove(),e.J=null),e.H.classList.remove(u);else if(!n)if(a){var h=1e3;clearTimeout(this.F[o.field]),this.F[o.field]=setTimeout(function(){i()},h)}else i();l=c.valid}return l},o.prototype.load=function(){var e=this;this.form.forEach(function(t){e.processFormItem(t,0)});var i;try{var a=JSON.stringify(this.data);i=t(JSON.parse(a))}catch(e){throw new Error("The 'data' object is not serializable (it may contain circular dependencies): "+e)}for(var n in i)this.setValue(n,i[n])},o.prototype.setValue=function(e,t){this.D.forEach(function(i){i.applyValue(e,t)})},o.prototype.updateDependentState=function(){var e=this,t=[!0];(this.E?this.E:this.D).forEach(function(i){var a=e.updateState(i,{enabled:t[i.level]&&!i.data.disabled});a.isValue&&(t[a.level+1]=a.enabled&&a.checked)})},o.prototype.processFormItem=function(e,t){var i=this,a=this.getFieldType(e),n=[];if("radio"===a){if(e.name){var o=new l;o.field=e.id,o.data=e,o.level=t,o.type="label",o.interactive=!1,o.text=e.name,i.D.push(o),n.push(o)}e.options.forEach(function(o){var d=new l;d.field=e.id,d.data=o,d.level=t,d.type=a,d.isValue=!0,d.text=o.name,d.resolved=o.id,i.D.push(d),n.push(d),o.children&&o.children.forEach(function(e){var a=i.processFormItem(e,t+1);n=n.concat(a)})})}else if("title"===a){var o=new l;o.field=e.id,o.data=e,o.level=t,o.type=a,o.interactive=!1,o.text=e.name,i.D.push(o),n.push(o)}else if("image"===a){var o=new l;o.isValue=!0,o.field=e.id,o.data=e,o.level=t,o.type=a,o.interactive=!1,o.text=null,i.D.push(o),n.push(o)}else if("html"===a){var o=new l;o.isValue=!0,o.field=e.id,o.data=e,o.level=t,o.type=a,o.interactive=!1,o.text=null,i.D.push(o),n.push(o)}else if("scrollable"===a){var o=new l;o.isValue=!0,o.field=e.id,o.data=e,o.level=t,o.type=a,o.interactive=!1,o.text=null,i.D.push(o),n.push(o)}else{var o=new l;o.field=e.id,o.data=e,o.level=t,o.type=a,o.text=e.name,o.children=[],i.D.push(o),n.push(o)}return"checkbox"===a&&(o.isValue=!0,o.resolved=!0,e.children&&e.children.forEach(function(e){var a=i.processFormItem(e,t+1);n=n.concat(a)})),n},o.prototype.doOnKey=function(e){if("function"==typeof this.onKey){var t={key:e};this.onKey(t)}},o.prototype.createInteractive=function(e){var t=this,i={"label":function(){return new d},"title":function(){return new d},"image":function(){var t=new d,i=document.createElement("img");return i.src=e.data.image,t.element=i,t},"html":function(){var t=new d,i=document.createElement("div");return"string"==typeof e.data.text?i.innerText=e.data.text:"string"==typeof e.data.html&&(i.innerHTML=e.data.html),t.element=i,t},"scrollable":function(){var i=new d,a=document.createElement("div");a.className=t.theme+"_form_item_scrollable_scroll",e.data.height&&(a.style.height=e.data.height+"px");var n=document.createElement("div");return n.className=t.theme+"_form_item_scrollable_scroll_content","string"==typeof e.data.text?n.innerText=e.data.text:"string"==typeof e.data.html&&(n.innerHTML=e.data.html),a.appendChild(n),i.element=a,i},"text":function(){var i=new d;i.apply=function(e){i.row=e;var t=i.element;t.value=e.value,t.disabled=!e.enabled};var a=document.createElement("input");return a.name=e.field,a.type="text",a.autocomplete="off",a.onkeydown=function(e){var i=!1;switch(e.keyCode){case 13:t.doOnKey("Enter");break;case 27:t.doOnKey("Escape");break;default:i=!0}i||(e.preventDefault(),e.stopPropagation())},a.oninput=function(e){i.onInput()},a.onblur=function(e){i.onBlur()},i.element=a,i.canFocus=function(){return!i.element.disabled},i.focus=function(){i.element.focus(),i.element.setSelectionRange(0,i.element.value.length)},i.save=function(){var t={};return t[e.field]=a.value,t},i},"textarea":function(){var i=new d;i.apply=function(e){i.row=e;var t=i.element;t.value=e.value,t.disabled=!e.enabled};var a=document.createElement("textarea");return a.name=e.field,e.data.height&&(a.style.height=e.data.height+"px"),a.onkeydown=function(e){var i=!1;switch(e.keyCode){case 13:(e.ctrlKey||e.metaKey)&&t.doOnKey("Enter"),i=!1;break;case 27:t.doOnKey("Escape");break;default:i=!0}i||e.stopPropagation()},a.oninput=function(e){i.onInput()},a.onblur=function(e){i.onBlur()},i.element=a,i.canFocus=function(){return!i.element.disabled},i.focus=function(){i.element.focus(),i.element.setSelectionRange(0,0)},i.save=function(){var t={};return t[e.field]=a.value,t},i},"date":function(){var i=new d;i.apply=function(e){i.row=e;var a=i.element,n=i.picker;e.data.dateFormat&&(n.pattern=e.data.dateFormat);var o=e.data.locale||t.locale;o&&(n.locale=o),a.disabled=!e.enabled,n.date=new DayPilot.Date(e.value);var l=new DayPilot.Date(e.value).toString(e.data.dateFormat||n.pattern,n.locale);a.value=l};var a=document.createElement("input");a.name=e.field;var n=new DayPilot.DatePicker({target:a,theme:"navigator_modal",zIndex:t.zIndex+1,resetTarget:!1,targetAlignment:"left",onTimeRangeSelect:function(e){i.onInput({"immediate":!0})}});return a.picker=n,a.className=t.theme+"_input_date",a.type="text",a.onkeydown=function(e){var i=!1;switch(e.keyCode){case 13:n.visible?n.close():t.doOnKey("Enter");break;case 27:n.visible?n.close():t.doOnKey("Escape");break;case 9:n.close(),i=!0;break;default:i=!0}i||(e.preventDefault(),e.stopPropagation())},a.onfocus=function(){n.show()},a.onclick=function(){n.show()},a.oninput=function(e){i.onInput()},a.onblur=function(e){i.onBlur()},i.element=a,i.picker=n,i.canFocus=function(){return!i.element.disabled},i.focus=function(){i.element.focus()},i.save=function(){var t=n.date?n.date.toString():null,i={};return i[e.field]=t,i},i},"select":function(){var t=new d;t.apply=function(e){t.row=e;var i=t.element;i.value=e.value,i.disabled=!e.enabled};var i=document.createElement("select");return i.name=e.field,e.data.options&&e.data.options.forEach&&e.data.options.forEach(function(e){var t=document.createElement("option");t.innerText=e.name||e.id,t.value=e.id,t.K=e.id,i.appendChild(t)}),i.onchange=function(e){t.onInput({"immediate":!0})},i.onblur=function(e){t.onBlur()},t.element=i,t.canFocus=function(){return!t.element.disabled},t.focus=function(){t.element.focus()},t.save=function(){var t=null,a=i.options[i.selectedIndex];a&&"undefined"!=typeof a.K&&(t=a.K);var n={};return n[e.field]=t,n},t},"searchable":function(){var i=new d;i.apply=function(e){i.row=e;var t=i.searchable;t.disabled=!e.enabled,t.select(e.value)};var a=new r({data:e.data.options||[],name:e.field,theme:t.theme+"_form_item_searchable",listZIndex:t.zIndex+1,onSelect:function(e){e.ui&&i.onInput({"immediate":!0})}}),n=a.create();return i.element=n,i.searchable=a,i.canFocus=function(){return!i.searchable.disabled},i.focus=function(){i.searchable.focus()},i.save=function(){var t=a.selected&&a.selected.id,i={};return i[e.field]=t,i},i},"radio":function(){var i=new d;i.apply=function(e){i.row=e;var t=i.radio;t.checked=e.checked,t.disabled=!e.enabled};var a=document.createElement("label"),n=document.createElement("input");n.type="radio",n.name=e.field,n.K=e.resolved,n.onchange=function(e){var a=i.row;t.findRowsByField(a.field).forEach(function(e){t.updateState(e,{checked:!1})}),t.updateState(a,{checked:!0}),t.applyState(),i.onInput({"immediate":!0})},n.onblur=function(e){i.onBlur()},a.appendChild(n);var o=document.createTextNode(e.text);return a.append(o),i.element=a,i.radio=n,i.canFocus=function(){return!1},i.focus=function(){i.radio.focus()},i.save=function(){if(!n.checked)return{};var t=n.K,i={};return i[e.field]=t,i},i},"checkbox":function(){var i=new d;i.apply=function(e){i.row=e;var t=i.checkbox;t.checked=e.checked,t.disabled=!e.enabled};var a=document.createElement("label"),n=document.createElement("input");n.type="checkbox",n.name=e.field,n.K=e.resolved,n.onchange=function(e){var a=i.row;t.updateState(a,{checked:this.checked}),t.applyState(),i.onInput({"immediate":!0})},n.onblur=function(e){i.onBlur()},a.appendChild(n);var o=document.createTextNode(e.text);return a.append(o),i.element=a,i.checkbox=n,i.canFocus=function(){return!1},i.focus=function(){i.checkbox.focus()},i.save=function(){var t=n.checked,i={};return i[e.field]=t,i},i},"table":function(){var i=new d;i.apply=function(e){i.row=e;var t=i.table;t.disabled=!e.enabled,t.load(e.value||[])};var a=new s({name:e.field,form:t,theme:t.theme+"_form_item_tabular",item:e.data,onInput:function(e){i.onInput()}}),n=a.create();return i.element=n,i.table=a,i.canFocus=function(){return!1},i.focus=function(){i.table.focus()},i.save=function(){var t=a.save(),i={};return i[e.field]=t,i},i}};return t.plugins&&t.plugins[e.type]?t.plugins[e.type](e):i[e.type]()},o.prototype.findRowsByField=function(e){return this.D.filter(function(t){return t.field===e})},o.prototype.findViewById=function(e,t){return this.G.find(function(i){return i.row.field===e&&("radio"!==i.row.type||i.row.resolved===t)})},o.prototype.firstFocusable=function(){return this.G.find(function(e){return e.canFocus&&e.canFocus()})},o.prototype.updateState=function(e,t){var i=this.E?this.E:this.D,a=i.indexOf(e);return this.E=i.map(function(i){if(i!==e)return i;if(e.propsEqual(t))return e;var a=e.clone();for(var n in t)a[n]=t[n];return a}),this.E[a]},o.prototype.updateInteractive=function(e){var t=this.E.indexOf(e);this.G[t].apply(e)},o.prototype.applyState=function(){var e=this;if(this.updateDependentState(),this.E){this.E.filter(function(t,i){return e.D[i]!==t}).forEach(function(t){e.updateInteractive(t)}),this.D=this.E,this.E=null}},o.prototype.getFieldType=function(e){return["text","date","select","searchable","radio","checkbox","table","title","image","html","textarea","scrollable"].indexOf(e.type)!==-1?e.type:e.type&&this.plugins&&this.plugins[e.type]?e.type:e.image?"image":e.html||e.text?"html":e.id?e.options?"searchable":e.dateFormat?"date":e.columns?"table":"text":"title"},o.prototype.serialize=function(){var e={};return this.G.forEach(function(t){var i=t.save();for(var a in i)e[a]=i[a]}),e};var l=function(){this.id=this.guid(),this.field=null,this.data=null,this.type=null,this.level=0,this.enabled=!0,this.value=null,this.text=null,this.interactive=!0,this.isValue=!1,this.checked=!1,this.resolved=null};l.prototype.clone=function(){var e=new l;for(var t in this)"id"!==t&&(e[t]=this[t]);return e},l.prototype.propsEqual=function(e){for(var t in e)if(this[t]!==e[t])return!1;return!0},l.prototype.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},l.prototype.applyValue=function(e,t){this.field===e&&(this.value=t,this.isValue&&t===this.resolved&&(this.checked=!0))};var d=function(){this.element=null,this.canFocus=function(){return!1},this.apply=function(e){},this.focus=function(){},this.save=function(){return{}}},r=function(e){this.data=[],this.name=null,this.theme="searchable_default",this.L=!1,this.listZIndex=1e5,this.onSelect=null,this.M=null,this.N=null,this.O=!1,this.P=null,this.Q=null,this.R=[],this.S=null,e=e||{};var t=this,i={"selected":{post:function(e){"object"==typeof e&&e.id?t.M=e:"string"!=typeof e&&"number"!=typeof e||t.select(e)}}};Object.defineProperty(this,"selected",{get:function(){return this.M}}),Object.defineProperty(this,"disabled",{get:function(){return this.L},set:function(e){this.L=e,this.P&&(this.P.disabled=e,e&&this.T())}});for(var a in e)i[a]||(this[a]=e[a]);for(var a in e)i[a]&&i[a].post(e[a])};r.prototype.select=function(e){return this.M=this.data.find(function(t){return t.id===e}),this.U(!1),this},r.prototype.create=function(){function e(){m.style.display="",m.style.top=p.offsetHeight+"px",m.style.left="0px",m.style.width=p.offsetWidth+"px",m.innerHTML="",m.addEventListener("mousedown",function(e){e.preventDefault()}),r.N=null,r.R=[];var e=null;r.data.forEach(function(i){var n=i.name||i.id;if(n.toLowerCase().indexOf(p.value.toLowerCase())!==-1){var o=document.createElement("div");o.className=r.theme+"_list_item",o.innerText=n,o.item=i,i===r.M&&(r.N=o),e||(e=o),o.addEventListener("mousedown",function(e){a(o),e.preventDefault()}),o.addEventListener("mousemove",function(e){r.N!==o&&(r.N=o,t({dontScroll:!0}))}),m.appendChild(o),r.R.push(o)}}),r.N||(r.N=e),t()}function t(e){e=e||{};var t=!e.dontScroll;document.querySelectorAll("."+r.theme+"_list_item_highlight").forEach(function(e){e.className=e.className.replace(r.theme+"_list_item_highlight","")}),r.N&&(r.N.className+=" "+r.theme+"_list_item_highlight",t&&!i(r.N,m)&&r.N.scrollIntoView())}function i(e,t){var i=e.getBoundingClientRect(),a=t.getBoundingClientRect();return i.top>=a.top&&i.bottom<=a.bottom}function a(e){var t=e.item;r.M=t,r.U(!0),o(),l()}function n(){r.T()}function o(){r.V()}function l(){r.O=!0,p.setAttribute("readonly","readonly"),p.focus()}function d(){r.O=!1,p.removeAttribute("readonly"),p.value="",e()}var r=this,s=this,c=document.createElement("div");c.className=this.theme+"_main",c.style.position="relative";var u=document.createElement("div");u.className=this.theme+"_icon",u.style.position="absolute",u.style.right="0",u.style.top="0",u.style.bottom="0",u.style.width="20px",u.addEventListener("mousedown",function(e){e.preventDefault(),r.O?(r.focus(),d()):(n(),l())});var m=document.createElement("div");m.className=this.theme+"_list",m.style.display="none",m.style.position="absolute",m.style.zIndex=this.listZIndex;var h=document.createElement("input");h.type="hidden",h.name=this.name,h.searchable=s,this.S=h;var p=document.createElement("input");return p.type="text",p.className=this.theme+"_input",p.disabled=this.L,p.addEventListener("click",function(e){d()}),p.addEventListener("focus",function(t){p.value="",e()}),p.addEventListener("input",function(t){e()}),p.addEventListener("blur",function(e){p.removeAttribute("readonly"),n()}),p.addEventListener("keydown",function(e){if(r.O){if("Enter"===e.key)return;if("Esc"===e.key||"Escape"===e.key)return;d()}if("ArrowDown"===e.key){var i=s.R.indexOf(s.N);i+1<s.R.length&&(s.N=s.R[i+1]),t()}else if("ArrowUp"===e.key){var i=s.R.indexOf(s.N);i-1>=0&&(s.N=s.R[i-1]),t()}else"Enter"===e.key?r.N?(e.stopPropagation(),a(r.N)):(e.stopPropagation(),n(),l()):"Esc"!==e.key&&"Escape"!==e.key||(e.stopPropagation(),n(),l())}),this.P=p,this.Q=m,this.M||(this.M=this.data[0],this.M&&(p.value=this.M.name)),c.appendChild(p),c.appendChild(u),c.appendChild(h),c.appendChild(m),c},r.prototype.T=function(){this.V(),this.M?this.P.value=this.M.name:(this.P.value="",this.U(!0))},r.prototype.focus=function(){this.O=!0,this.P.setAttribute("readonly","readonly"),this.P.focus(),this.T()},r.prototype.V=function(){this.Q.style.display="none"},r.prototype.U=function(e){if(this.S.value=this.selected?this.selected.id:null,this.M?this.P.value=this.M.name:this.P.value="","function"==typeof this.onSelect){var t={control:this,ui:e};this.onSelect(t)}};var s=function(e){this.form=null,this.item=null,this.data=null,this.name=null,this.theme="edit_table_default",this.onInput=null,this.nav={},this.W=null,this.D=[],e=e||{};for(var t in e)this[t]=e[t]};s.prototype.create=function(){var e=this,t=document.createElement("div");t.className=this.theme+"_main",t.style.position="relative";var i=document.createElement("input");i.type="hidden",i.name=e.name,i.table=this,t.appendChild(i);var a=document.createElement("div");a.className=this.theme+"_table";var n=this.X();a.appendChild(n);var o=e.Y({});o.spacer=!0;var l=this.Z(o);l.classList.add(e.theme+"_spacer"),a.appendChild(l);var d=document.createElement("div");d.className=e.theme+"_tbody",a.appendChild(d),t.appendChild(a);var r=document.createElement("div");t.appendChild(r),this.nav.body=d,this.nav.table=a,this.nav.main=t,this.nav.after=r;var s=document.createElement("div"),c=document.createElement("span");return c.className=this.theme+"_plus",c.addEventListener("click",function(t){if(!e.disabled){var i=e.item.onNewRow,a={};if("function"==typeof i){var n={};n.result=e.form.serialize(),n.value={},i(n),a=n.value}var o=e.Y(a);e.D.push(o),e.$(),e._()}}),this.nav.plus=c,s.appendChild(c),t.appendChild(s),t},s.prototype.X=function(){var e=this,t=document.createElement("div");return t.classList.add(this.theme+"_row"),t.classList.add(this.theme+"_header"),this.item.columns.forEach(function(i){var a=document.createElement("div");a.classList.add(e.theme+"_cell"),a.innerText=i.name,t.appendChild(a)}),t},s.prototype.aa=function(){var e=this.item.max||0;return!!(e&&this.D.length>=e)},s.prototype.save=function(){var e=this,t=[];return e.D.forEach(function(e){var i={};e.cells.forEach(function(e){i[e.id]=e.value}),t.push(i)}),t},s.prototype.load=function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("Array expected");this.data=e,this.ba(),this.$()},s.prototype.ca=function(){this.disabled?this.nav.main.classList.add(this.theme+"_disabled"):this.nav.main.classList.remove(this.theme+"_disabled"),this.aa()?this.nav.plus.classList.add(this.theme+"_plus_max"):this.nav.plus.classList.remove(this.theme+"_plus_max")},s.prototype.ba=function(){var e=this;this.D=[],this.data.forEach(function(t){var i=e.Y(t);e.D.push(i)})},s.prototype.da=function(e){var t=this,i=t.D.indexOf(e);t.D.splice(i,1)},s.prototype.Y=function(e){var t=this,i={};return i.data=e,i.cells=[],t.item.columns.forEach(function(a){var n=a.id,o=e[n],l=t.ea(a);if("undefined"==typeof o)if("text"===l)o="";else if("number"===l)o=0;else if("select"===l){var d=a.options;o=d&&d[0].id}var r={};r.id=n,r.value=o,r.type=l,r.data=a,i.cells.push(r)}),i},s.prototype.ea=function(e){var t=e.type;return t||(t=e.options?"select":"text"),t},s.prototype.$=function(){var e=this;if(this.nav.body.innerHTML="",this.nav.after.innerHTML="",this.D.forEach(function(t){var i=e.Z(t);e.nav.body.appendChild(i)}),0===this.D.length){var t=e.fa();e.nav.after.appendChild(t)}this.ca()},s.prototype.fa=function(){var e=document.createElement("div");return e.className=this.theme+"_empty",e},s.prototype.Z=function(e){var t=this,i=document.createElement("div");i.className=t.theme+"_row",e.cells.forEach(function(a){var n=document.createElement("div");n.className=t.theme+"_cell";var o=t.ga(a);if(e.spacer){var l=document.createElement("div");l.style.height="0px",l.style.overflow="hidden",l.appendChild(o),n.appendChild(l)}else n.appendChild(o);i.appendChild(n)});var a=document.createElement("div");a.classList.add(t.theme+"_cell"),a.classList.add(t.theme+"_rowaction");var n=document.createElement("span");return n.className=this.theme+"_delete",n.addEventListener("click",function(i){t.disabled||(t.da(e),t.$(),t._())}),e.spacer||a.appendChild(n),i.appendChild(a),i},s.prototype._=function(){var e=this;if("function"==typeof e.onInput){var t={};e.onInput(t)}},s.prototype.ga=function(e){var t=this,i=e.type;if("text"===i||"number"===i){var a=document.createElement("input");return a.type=i,t.disabled&&(a.disabled=!0),e.value&&(a.value=e.value),a.addEventListener("keyup",function(a){"number"===i?e.value=Number(this.value):e.value=this.value,t._()}),a}if("select"===i){var n=document.createElement("select");return t.disabled&&(n.disabled=!0),e.data.options.forEach(function(t){var i=document.createElement("option");i.innerText=t.name,i.value=t.id,i.K=t.id,n.appendChild(i),e.value===t.id&&i.setAttribute("selected",!0)}),n.addEventListener("change",function(i){var a=n.options[n.selectedIndex];a&&"undefined"!=typeof a.K&&(e.value=a.K),t._()}),n}throw new Error("Unsupported item type: "+i)},s.prototype.focus=function(){}}}(DayPilot);