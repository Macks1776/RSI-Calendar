/*
DayPilot Lite
Copyright (c) 2005 - 2021 Annpoint s.r.o.
http://www.daypilot.org/
Licensed under Apache Software License 2.0
Version: 2021.2.261-lite
*/
if("undefined"==typeof DayPilot)var DayPilot={};"undefined"==typeof DayPilot.Global&&(DayPilot.Global={}),function(){var e=function(){};if("undefined"==typeof DayPilot.Calendar){var t={};t.selectedCells=[],t.topSelectedCell=null,t.bottomSelectedCell=null,t.selecting=!1,t.column=null,t.firstSelected=null,t.firstMousePos=null,t.originalMouse=null,t.originalHeight=null,t.originalTop=null,t.resizing=null,t.globalHandlers=!1,t.moving=null,t.register=function(e){t.registered||(t.registered=[]);for(var i=t.registered,n=0;n<i.length;n++)if(i[n]===e)return;i.push(e)},t.unregister=function(e){var i=t.registered;if(i){var n=DayPilot.indexOf(i,e);n!==-1&&i.splice(n,1)}},t.getCellsAbove=function(e){for(var i=[],n=t.getColumn(e),s=e.parentNode,l=null;s&&l!==t.firstSelected;)for(l=s.getElementsByTagName("td")[n],i.push(l),s=s.previousSibling;s&&"TR"!==s.tagName;)s=s.previousSibling;return i},t.getCellsBelow=function(e){for(var i=[],n=t.getColumn(e),s=e.parentNode,l=null;s&&l!==t.firstSelected;)for(l=s.getElementsByTagName("td")[n],i.push(l),s=s.nextSibling;s&&"TR"!==s.tagName;)s=s.nextSibling;return i},t.getColumn=function(e){for(var t=0;e.previousSibling;)e=e.previousSibling,"TD"===e.tagName&&t++;return t},t.gUnload=function(e){if(t.registered)for(var i=t.registered,n=0;n<i.length;n++){var s=i[n];s.dispose(),t.unregister(s)}},t.gMouseUp=function(i){if(t.resizing){if(!t.resizingShadow)return t.resizing.style.cursor="default",document.body.style.cursor="default",void(t.resizing=null);var n=t.resizing.event,s=t.resizingShadow.clientHeight+4,l=t.resizingShadow.offsetTop,a=t.resizing.dpBorder;t.deleteShadow(t.resizingShadow),t.resizingShadow=null,t.resizing.style.cursor="default",n.calendar.nav.top.style.cursor="auto",t.resizing.onclick=null,t.resizing=null,n.calendar.a(n,s,l,a)}else if(t.moving){if(!t.movingShadow)return t.moving=null,void(document.body.style.cursor="default");var l=t.movingShadow.offsetTop;t.deleteShadow(t.movingShadow);var n=t.moving.event,o=t.movingShadow.column;t.moving=null,t.movingShadow=null,n.calendar.nav.top.style.cursor="auto";var r=i||window.event;n.calendar.b(n,o,l,r)}else if(t.selecting&&null!==t.topSelectedCell){var h=t.selecting.calendar;t.selecting=!1;var c=h.getSelection();h.c(c.start,c.end),"Hold"!==h.timeRangeSelectedHandling&&"HoldForever"!==h.timeRangeSelectedHandling&&e()}else t.selecting=!1},t.deleteShadow=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.moveShadow=function(e){var i=t.movingShadow,n=i.parentNode;n.style.display="none",i.parentNode.removeChild(i),e.firstChild.appendChild(i),i.style.left="0px",n.style.display="",i.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"},t.Calendar=function(e){var i=!1;if(this instanceof t.Calendar&&!this.d&&(i=!0,this.d=!0),!i)throw"DayPilot.Calendar() is a constructor and must be called as 'var c = new DayPilot.Calendar(id);'";var n=this;this.uniqueID=null,this.v="2021.2.261-lite",this.id=e,this.clientName=e,this.cache={},this.cache.pixels={},this.elements={},this.elements.events=[],this.elements.selection=[],this.nav={},this.afterRender=function(){},this.fasterDispose=!0,this.angularAutoApply=!1,this.api=2,this.borderColor="#CED2CE",this.businessBeginsHour=9,this.businessEndsHour=18,this.cellHeight=30,this.columnMarginRight=5,this.cornerBackColor="#F3F3F9",this.f=!0,this.days=1,this.durationBarVisible=!0,this.eventHeaderHeight=14,this.eventHeaderVisible=!0,this.eventsLoadMethod="GET",this.headerHeight=30,this.height=300,this.heightSpec="BusinessHours",this.hideUntilInit=!0,this.hourWidth=60,this.initScrollPos="Auto",this.loadingLabelText="Loading...",this.loadingLabelVisible=!0,this.loadingLabelBackColor="ff0000",this.loadingLabelFontColor="#ffffff",this.loadingLabelFontFamily="Tahoma, Arial, Helvetica, sans-serif",this.loadingLabelFontSize="10pt",this.locale="en-us",this.selectedColor="#316AC5",this.showToolTip=!0,this.startDate=(new DayPilot.Date).getDatePart(),this.cssClassPrefix="calendar_default",this.theme=null,this.timeFormat="Auto",this.visible=!0,this.timeRangeSelectedHandling="Enabled",this.eventClickHandling="Enabled",this.eventResizeHandling="Update",this.eventMoveHandling="Update",this.eventDeleteHandling="Disabled",this.onBeforeEventRender=null,this.onEventClick=null,this.onEventClicked=null,this.onEventDelete=null,this.onEventDeleted=null,this.onEventMove=null,this.onEventMoved=null,this.onEventResize=null,this.onEventResized=null,this.onTimeRangeSelect=null,this.onTimeRangeSelected=null,this.clearSelection=function(){t.topSelectedCell=null,t.bottomSelectedCell=null,this.g()},this.g=function(){DayPilot.de(n.elements.selection),n.elements.selection=[],n.nav.activeSelection=null},this.h=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("MSIE")!==-1,this.i=navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!==-1,this.j=function(){if(/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){return new Number(RegExp.$1)>=10.5}return!1}(),this.k=function(){if(/AppleWebKit[\/\s](\d+\.\d+)/.test(navigator.userAgent)){return new Number(RegExp.$1)>=522}return!1}(),this.cleanSelection=this.clearSelection,this.l=function(e,t,i){var s={};s.action=e,s.parameters=i,s.data=t,s.header=this.m();var l="JSON"+DayPilot.JSON.stringify(s);__doPostBack(n.uniqueID,l)},this.n=function(e,t,i){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.callbackTimeout=window.setTimeout(function(){n.loadingStart()},100);var s={};s.action=e,s.parameters=i,s.data=t,s.header=this.m();var l="JSON"+DayPilot.JSON.stringify(s);this.backendUrl?DayPilot.request(this.backendUrl,this.o,l,this.ajaxError):"function"==typeof WebForm_DoCallback&&WebForm_DoCallback(this.uniqueID,l,this.p,this.clientName,this.onCallbackError,!0)},this.onCallbackError=function(e,t){alert("Error!\r\nResult: "+e+"\r\nContext:"+t)},this.dispose=function(){var e=n;e.q(),e.nav.zoom.onmousemove=null,e.nav.scroll.root=null,DayPilot.pu(e.nav.loading),e.r(),e.s(),e.nav.select=null,e.nav.cornerRight=null,e.nav.scrollable=null,e.nav.zoom=null,e.nav.loading=null,e.nav.header=null,e.nav.hourTable=null,e.nav.scrolltop=null,e.nav.scroll=null,e.nav.main=null,e.nav.message=null,e.nav.messageClose=null,e.nav.top=null,t.unregister(e)},this.t=function(){this.nav.top.dispose=this.dispose},this.o=function(e){n.p(e.responseText)},this.m=function(){var e={};return e.control="dpc",e.id=this.id,e.v=this.v,e.days=n.days,e.startDate=n.startDate,e.heightSpec=n.heightSpec,e.businessBeginsHour=n.businessBeginsHour,e.businessEndsHour=n.businessEndsHour,e.hashes=n.hashes,e.timeFormat=n.timeFormat,e.viewType=n.viewType,e.locale=n.locale,e},this.u=function(e,t){for(var i=e.parentNode;i&&"TD"!==i.tagName;)i=i.parentNode;var s=document.createElement("div");s.setAttribute("unselectable","on"),s.style.position="absolute",s.style.width=e.offsetWidth+"px",s.style.height=e.offsetHeight+"px",s.style.left=e.offsetLeft+"px",s.style.top=e.offsetTop+"px",s.style.boxSizing="border-box",s.style.zIndex=101,s.className=n.w("_shadow");var l=document.createElement("div");return l.className=n.w("_shadow_inner"),s.appendChild(l),i.firstChild.appendChild(s),s},this.z={},this.z.locale=function(){var e=DayPilot.Locale.find(n.locale);return e?e:DayPilot.Locale.US},this.z.timeFormat=function(){return"Auto"!==n.timeFormat?n.timeFormat:this.locale().timeFormat};var s=this.z;this.p=function(e,t){if(e&&0===e.indexOf("$$$")){if(!window.console)throw"Error received from the server side: "+e;return void console.log("Error received from the server side: "+e)}var e=eval("("+e+")");if(e.CallBackRedirect)return void(document.location.href=e.CallBackRedirect);if("None"===e.UpdateType)return n.loadingStop(),void n.A();if(n.q(),"Full"===e.UpdateType&&(n.columns=e.Columns,n.days=e.Days,n.startDate=new DayPilot.Date(e.StartDate),n.heightSpec=e.HeightSpec?e.HeightSpec:n.heightSpec,n.businessBeginsHour=e.BusinessBeginsHour?e.BusinessBeginsHour:n.businessBeginsHour,n.businessEndsHour=e.BusinessEndsHour?e.BusinessEndsHour:n.businessEndsHour,n.headerDateFormat=e.HeaderDateFormat?e.HeaderDateFormat:n.headerDateFormat,n.viewType=e.ViewType,n.backColor=e.BackColor?e.BackColor:n.backColor,n.eventHeaderVisible=e.EventHeaderVisible?e.EventHeaderVisible:n.eventHeaderVisible,n.timeFormat=e.TimeFormat?e.TimeFormat:n.timeFormat,n.locale=e.Locale?e.Locale:n.locale,n.B()),e.Hashes)for(var i in e.Hashes)n.hashes[i]=e.Hashes[i];n.events.list=e.Events,n.C(),n.D(),"Full"===e.UpdateType&&(n.E(),n.F(),n.G(),n.H()),n.A(),n.I(),n.clearSelection(),n.afterRender(e.CallBackData,!0),n.loadingStop()},this.J=function(){return 24},this.K=function(){return this.businessBeginsHour>this.businessEndsHour?24-this.businessBeginsHour+this.businessEndsHour:this.businessEndsHour-this.businessBeginsHour},this.L=function(){return 48},this.M=function(){return 2===n.api},this.eventClickCallBack=function(e,t){this.n("EventClick",t,e)},this.eventClickPostBack=function(e,t){this.l("EventClick",t,e)},this.N=function(e){var t=this,e=t.event;if(n.M()){var i={};if(i.e=e,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onEventClick&&(n.O.apply(function(){n.onEventClick(i)}),i.preventDefault.value))return;switch(n.eventClickHandling){case"CallBack":n.eventClickCallBack(e);break;case"PostBack":n.eventClickPostBack(e)}"function"==typeof n.onEventClicked&&n.O.apply(function(){n.onEventClicked(i)})}else switch(n.eventClickHandling){case"PostBack":n.eventClickPostBack(e);break;case"CallBack":n.eventClickCallBack(e);break;case"JavaScript":n.onEventClick(e)}},this.eventDeleteCallBack=function(e,t){this.n("EventDelete",t,e)},this.eventDeletePostBack=function(e,t){this.l("EventDelete",t,e)},this.P=function(e){if(n.M()){var t={};if(t.e=e,t.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onEventDelete&&(n.O.apply(function(){n.onEventDelete(t)}),t.preventDefault.value))return;switch(n.eventDeleteHandling){case"CallBack":n.eventDeleteCallBack(e);break;case"PostBack":n.eventDeletePostBack(e);break;case"Update":n.events.remove(e)}"function"==typeof n.onEventDeleted&&n.O.apply(function(){n.onEventDeleted(t)})}else switch(n.eventDeleteHandling){case"PostBack":n.eventDeletePostBack(e);break;case"CallBack":n.eventDeleteCallBack(e);break;case"JavaScript":n.onEventDelete(e)}},this.eventResizeCallBack=function(e,t,i,n){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var s={};s.e=e,s.newStart=t,s.newEnd=i,this.n("EventResize",n,s)},this.eventResizePostBack=function(e,t,i,n){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var s={};s.e=e,s.newStart=t,s.newEnd=i,this.l("EventResize",n,s)},this.a=function(e,t,i,s){var l=1,a=new Date,o=new Date,r=e.start(),h=e.end();if("top"===s){var c=r.getDatePart(),d=Math.floor((i-l)/n.cellHeight),u=30*d,v=60*u*1e3;a=c.addTime(v),o=e.end()}else if("bottom"===s){var c=h.getDatePart(),d=Math.floor((i+t-l)/n.cellHeight),u=30*d,v=60*u*1e3;a=r,o=c.addTime(v)}if(n.M()){var p={};if(p.e=e,p.newStart=a,p.newEnd=o,p.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onEventResize&&(n.O.apply(function(){n.onEventResize(p)}),p.preventDefault.value))return;switch(n.eventResizeHandling){case"PostBack":n.eventResizePostBack(e,a,o);break;case"CallBack":n.eventResizeCallBack(e,a,o);break;case"Update":e.start(a),e.end(o),n.events.update(e)}"function"==typeof n.onEventResized&&n.O.apply(function(){n.onEventResized(p)})}else switch(n.eventResizeHandling){case"PostBack":n.eventResizePostBack(e,a,o);break;case"CallBack":n.eventResizeCallBack(e,a,o);break;case"JavaScript":n.onEventResize(e,a,o)}},this.eventMovePostBack=function(e,t,i,n,s){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var l={};l.e=e,l.newStart=t,l.newEnd=i,this.l("EventMove",s,l)},this.eventMoveCallBack=function(e,t,i,n,s){if(!t)throw"newStart is null";if(!i)throw"newEnd is null";var l={};l.e=e,l.newStart=t,l.newEnd=i,this.n("EventMove",s,l)},this.b=function(e,t,i,s){var l=1,a=Math.floor((i-l)/n.cellHeight),o=30*a*60*1e3,r=e.start(),h=e.end(),c=new Date;r instanceof DayPilot.Date&&(r=r.toDate()),c.setTime(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()));var d=r.getTime()-(c.getTime()+3600*r.getUTCHours()*1e3+30*Math.floor(r.getUTCMinutes()/30)*60*1e3),u=h.getTime()-r.getTime(),v=this.columns[t],p=v.Start.getTime(),f=new Date;f.setTime(p+o+d);var g=new DayPilot.Date(f),m=g.addTime(u);if(n.M()){var y={};if(y.e=e,y.newStart=g,y.newEnd=m,y.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onEventMove&&(n.O.apply(function(){n.onEventMove(y)}),y.preventDefault.value))return;switch(n.eventMoveHandling){case"PostBack":n.eventMovePostBack(e,g,m,v.Value);break;case"CallBack":n.eventMoveCallBack(e,g,m,v.Value);break;case"Update":e.start(g),e.end(m),n.events.update(e)}"function"==typeof n.onEventMoved&&n.O.apply(function(){n.onEventMoved(y)})}else switch(n.eventMoveHandling){case"PostBack":n.eventMovePostBack(e,g,m,v.Value);break;case"CallBack":n.eventMoveCallBack(e,g,m,v.Value);break;case"JavaScript":n.onEventMove(e,g,m,v.Value,!1)}},this.timeRangeSelectedPostBack=function(e,t,i,n){var s={};s.start=e,s.end=t,this.l("TimeRangeSelected",n,s)},this.timeRangeSelectedCallBack=function(e,t,i,n){var s={};s.start=e,s.end=t,this.n("TimeRangeSelected",n,s)},this.c=function(e,t){if(e=new DayPilot.Date(e),t=new DayPilot.Date(t),this.M()){var i={};if(i.start=e,i.end=t,i.preventDefault=function(){this.preventDefault.value=!0},"function"==typeof n.onTimeRangeSelect&&(n.O.apply(function(){n.onTimeRangeSelect(i)}),i.preventDefault.value))return;switch(n.timeRangeSelectedHandling){case"PostBack":n.timeRangeSelectedPostBack(e,t);break;case"CallBack":n.timeRangeSelectedCallBack(e,t)}"function"==typeof n.onTimeRangeSelected&&n.O.apply(function(){n.onTimeRangeSelected(i)})}else switch(n.timeRangeSelectedHandling){case"PostBack":n.timeRangeSelectedPostBack(e,t);break;case"CallBack":n.timeRangeSelectedCallBack(e,t);break;case"JavaScript":n.onTimeRangeSelected(e,t)}},this.Q=function(e){if(!t.selecting&&"Disabled"!==n.timeRangeSelectedHandling){var i=window.event?window.event.button:e.which;if(1===i||0===i)return t.firstMousePos=DayPilot.mc(e||window.event),t.selecting={},t.selecting.calendar=n,t.selectedCells&&(n.clearSelection(),t.selectedCells=[]),t.column=t.getColumn(this),t.selectedCells.push(this),t.firstSelected=this,t.topSelectedCell=this,t.bottomSelectedCell=this,n.R(),!1}},this.R=function(){this.getSelection();!function(){return}(),function(){var e=t.topSelectedCell,i=t.bottomSelectedCell,s=function(){if(e.data)return e.data.x;for(var t=e.parentNode.cells,i=0;i<t.length;i++)if(t[i]===e)return i;return-1}(),l=n.columns[s];if(l){var a=l.Start,o=n.getPixels(e.start,a).boxTop,r=n.getPixels(i.end,a).boxBottom,h=r-o,c=function(){if(n.nav.activeSelection)return n.nav.activeSelection;var e=document.createElement("div");e.setAttribute("unselectable","on"),e.style.position="absolute",e.style.left="0px",e.style.width="100%";var t=document.createElement("div");return t.setAttribute("unselectable","on"),t.className=n.w("_shadow_inner"),e.appendChild(t),n.nav.events.rows[0].cells[s].selection.appendChild(e),n.elements.selection.push(e),n.nav.activeSelection=e,e}();c.className=n.w("_shadow"),c.firstChild.innerHTML="",c.style.top=o+"px",c.style.height=h+"px"}}()},this.S=function(e){if("undefined"!=typeof t&&t.selecting){var i=DayPilot.mc(e||window.event);t.getColumn(this)===t.column&&(n.clearSelection(),i.y<t.firstMousePos.y?(t.selectedCells=t.getCellsBelow(this),t.topSelectedCell=t.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(t.selectedCells=t.getCellsAbove(this),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=t.selectedCells[0]),n.R())}},this.getSelection=function(){var e=t.topSelectedCell.start,i=t.bottomSelectedCell.end;return new DayPilot.Selection(e,i,null,n)},this.T=function(e){},this.U=function(e){if(e<0)return null;for(var t=0,i=n.nav.events.rows[0].cells,s=0;s<i.length;s++){if(t+=i[s].offsetWidth,e<t)return s}return null},this.V={},this.V.getCellCoords=function(){var e={};if(e.x=0,e.y=0,!n.coords)return null;e.x=n.U(n.coords.x);var t=0,i=Math.floor((n.coords.y-t)/n.cellHeight);return e.y=i,e.x<0?null:e},this.B=function(){this.columns=this.W();for(var e=0;e<this.columns.length;e++)this.X(this.columns[e])},this.X=function(e){e.Start=new DayPilot.Date(e.Start),e.putIntoBlock=function(e){for(var t=0;t<this.blocks.length;t++){var i=this.blocks[t];if(i.overlapsWith(e.part.top,e.part.height))return i.events.push(e),i.min=Math.min(i.min,e.part.top),i.max=Math.max(i.max,e.part.top+e.part.height),t}var i=[];return i.lines=[],i.events=[],i.overlapsWith=function(e,t){return!(e+t-1<this.min||e>this.max-1)},i.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var i=this.lines[t];if(i.isFree(e.part.top,e.part.height))return i.push(e),t}var i=[];return i.isFree=function(e,t){for(var i=e+t-1,n=this.length,s=0;s<n;s++){var l=this[s];if(!(i<l.part.top||e>l.part.top+l.part.height-1))return!1}return!0},i.push(e),this.lines.push(i),this.lines.length-1},i.events.push(e),i.min=e.part.top,i.max=e.part.top+e.part.height,this.blocks.push(i),this.blocks.length-1},e.putIntoLine=function(e){for(var t=0;t<this.lines.length;t++){var i=this.lines[t];if(i.isFree(e.part.top,e.part.height))return i.push(e),t}var i=[];return i.isFree=function(e,t){for(var i=e+t-1,n=this.length,s=0;s<n;s++){var l=this[s];if(!(i<l.part.top||e>l.part.top+l.part.height-1))return!1}return!0},i.push(e),this.lines.push(i),this.lines.length-1}},this.W=function(){var e=[],t=this.startDate.getDatePart(),i=this.days;switch(this.viewType){case"Day":i=1;break;case"Week":i=7,t=t.firstDayOfWeek(s.locale().weekStarts);break;case"WorkWeek":i=5,t=t.firstDayOfWeek(1)}for(var l=0;l<i;l++){var a=n.headerDateFormat?n.headerDateFormat:s.locale().datePattern,o={};o.Start=t.addDays(l),o.Name=o.Start.toString(a,s.locale()),o.InnerHTML=o.Name,e.push(o)}return e},this.visibleStart=function(){return this.columns[0].Start},this.visibleEnd=function(){var e=this.columns.length-1;return this.columns[e].Start.addDays(1)},this.w=function(e){var t=this.theme||this.cssClassPrefix;return t?t+e:""},this.q=function(){if(this.elements.events)for(var e=0;e<this.elements.events.length;e++){var t=this.elements.events[e],i=t.event;if(i&&(i.calendar=null),t.onclick=null,t.onclickSave=null,t.onmouseover=null,t.onmouseout=null,t.onmousemove=null,t.onmousedown=null,t.firstChild&&t.firstChild.firstChild&&t.firstChild.firstChild.tagName&&"IMG"===t.firstChild.firstChild.tagName.toUpperCase()){var n=t.firstChild.firstChild;n.onmousedown=null,n.onmousemove=null,n.onclick=null}t.helper=null,t.data=null,t.event=null,DayPilot.de(t)}this.elements.events=[]},this.Y=function(e){var i=e.cache||e.data,s=this.nav.events,l=document.createElement("div");l.style.position="absolute",l.style.left=e.part.left+"%",l.style.top=e.part.top+"px",l.style.width=e.part.width+"%",l.style.height=Math.max(e.part.height,2)+"px",l.style.overflow="hidden",l.data=e,l.event=e,l.unselectable="on",l.style.MozUserSelect="none",l.style.KhtmlUserSelect="none",l.className=this.w("_event"),i.cssClass&&DayPilot.Util.addClass(l,i.cssClass),l.isFirst=e.part.start.getTime()===e.start().getTime(),l.isLast=e.part.end.getTime()===e.end().getTime(),l.onclick=this.N,l.onmouseout=function(e){l.deleteIcon&&(l.deleteIcon.style.display="none")},l.onmousemove=function(e){var i=n.eventHeaderVisible?n.eventHeaderHeight:10;if("undefined"!=typeof t){var s=DayPilot.mo3(l,e);if(s&&!t.resizing&&!t.moving){l.deleteIcon&&(l.deleteIcon.style.display="");var a=this.isLast;s.y<=i&&"Disabled"!==n.eventResizeHandling?(this.style.cursor="n-resize",this.dpBorder="top"):this.offsetHeight-s.y<=5&&"Disabled"!==n.eventResizeHandling?a?(this.style.cursor="s-resize",this.dpBorder="bottom"):this.style.cursor="not-allowed":t.resizing||t.moving||("Disabled"!==n.eventClickHandling?this.style.cursor="pointer":this.style.cursor="default")}}},l.onmousedown=function(e){e=e||window.event;var i=e.which||e.button;if("n-resize"!==this.style.cursor&&"s-resize"!==this.style.cursor||1!==i){if(1===i&&"Disabled"!==n.eventMoveHandling){t.moving=this,t.moving.event=this.event;var s=t.moving.helper={};s.oldColumn=n.columns[this.data.part.dayIndex].Value,t.originalMouse=DayPilot.mc(e),t.originalTop=this.offsetTop;var l=DayPilot.mo3(this,e);l?t.moveOffsetY=l.y:t.moveOffsetY=0,n.nav.top.style.cursor="move"}}else t.resizing=this,t.originalMouse=DayPilot.mc(e),t.originalHeight=this.offsetHeight,t.originalTop=this.offsetTop,n.nav.top.style.cursor=this.style.cursor;return!1};var a=document.createElement("div");if(a.setAttribute("unselectable","on"),a.className=n.w("_event_inner"),a.innerHTML=e.client.html(),i.borderColor&&(a.style.borderColor=i.borderColor),i.backColor&&(a.style.background=i.backColor,(DayPilot.browser.ie9||DayPilot.browser.ielt9)&&(a.style.filter="")),i.fontColor&&(a.style.color=i.fontColor),l.appendChild(a),e.client.barVisible()){var o=e.part.height-2,r=100*e.part.barTop/o,h=Math.ceil(100*e.part.barHeight/o),c=document.createElement("div");c.setAttribute("unselectable","on"),c.className=this.w("_event_bar"),c.style.position="absolute",i.barBackColor&&(c.style.backgroundColor=i.barBackColor);var d=document.createElement("div");d.setAttribute("unselectable","on"),d.className=this.w("_event_bar_inner"),d.style.top=r+"%",0<h&&h<=1?d.style.height="1px":d.style.height=h+"%",i.barColor&&(d.style.backgroundColor=i.barColor),c.appendChild(d),l.appendChild(c)}if("Disabled"!==n.eventDeleteHandling){var u=document.createElement("div");u.style.position="absolute",u.style.right="2px",u.style.top="2px",u.style.width="17px",u.style.height="17px",u.className=n.w("_event_delete"),u.onclick=function(e){var t=this.parentNode.event;t&&n.P(t)},u.style.display="none",l.deleteIcon=u,l.appendChild(u)}if(s.rows[0].cells[e.part.dayIndex]){s.rows[0].cells[e.part.dayIndex].firstChild.appendChild(l),n.Z(l)}n.elements.events.push(l)},this.Z=function(e){for(var t=e&&e.childNodes?e.childNodes.length:0,i=0;i<t;i++)try{var n=e.childNodes[i];1===n.nodeType&&(n.unselectable="on",this.Z(n))}catch(e){}},this.I=function(){for(var e=0;e<this.columns.length;e++){var t=this.columns[e];if(t.blocks)for(var i=0;i<t.blocks.length;i++)for(var n=t.blocks[i],s=0;s<n.lines.length;s++)for(var l=n.lines[s],a=0;a<l.length;a++){var o=l[a];o.part.width=100/n.lines.length,o.part.left=o.part.width*s;var r=s===n.lines.length-1;r||(o.part.width=1.5*o.part.width),this.Y(o)}}},this.$=function(){this.nav.top.innerHTML="",this.f?DayPilot.Util.addClass(this.nav.top,this.w("_main")):(this.nav.top.style.lineHeight="1.2",this.nav.top.style.textAlign="left"),this.nav.top.style.MozUserSelect="none",this.nav.top.style.KhtmlUserSelect="none",this.nav.top.style.position="relative",this.nav.top.style.width=this.width?this.width:"100%",this.hideUntilInit&&(this.nav.top.style.visibility="hidden"),this.visible||(this.nav.top.style.display="none"),this.nav.scroll=document.createElement("div"),this.nav.scroll.style.height=this._()+"px","BusinessHours"===this.heightSpec?this.nav.scroll.style.overflow="auto":this.nav.scroll.style.overflow="hidden",this.nav.scroll.style.position="relative",!this.f;var e=this.aa();this.nav.top.appendChild(e),this.nav.scroll.style.zoom=1;var t=this.ba();this.nav.scrollable=t.firstChild,this.nav.scroll.appendChild(t),this.nav.top.appendChild(this.nav.scroll),this.nav.scrollLayer=document.createElement("div"),this.nav.scrollLayer.style.position="absolute",this.nav.scrollLayer.style.top="0px",this.nav.scrollLayer.style.left="0px",this.nav.top.appendChild(this.nav.scrollLayer),this.nav.loading=document.createElement("div"),this.nav.loading.style.position="absolute",this.nav.loading.style.top="0px",this.nav.loading.style.left=this.hourWidth+5+"px",this.nav.loading.style.backgroundColor=this.loadingLabelBackColor,this.nav.loading.style.fontSize=this.loadingLabelFontSize,this.nav.loading.style.fontFamily=this.loadingLabelFontFamily,this.nav.loading.style.color=this.loadingLabelFontColor,this.nav.loading.style.padding="2px",this.nav.loading.innerHTML=this.loadingLabelText,this.nav.loading.style.display="none",this.nav.top.appendChild(this.nav.loading)},this.G=function(){this.fasterDispose||DayPilot.pu(this.nav.hourTable),this.nav.scrollable.rows[0].cells[0].innerHTML="",this.nav.hourTable=this.ca(),this.nav.scrollable.rows[0].cells[0].appendChild(this.nav.hourTable)},this.ba=function(){var e=document.createElement("div");e.style.zoom=1,e.style.position="relative";var t=document.createElement("table");t.cellSpacing="0",t.cellPadding="0",t.border="0",t.style.border="0px none",t.style.width="100%",t.style.position="absolute";var i,n=t.insertRow(-1);if(i=n.insertCell(-1),i.valign="top",i.style.padding="0px",i.style.border="0px none",this.nav.hourTable=this.ca(),i.appendChild(this.nav.hourTable),i=n.insertCell(-1),i.valign="top",i.width="100%",i.style.padding="0px",i.style.border="0px none",this.f){var s=document.createElement("div");s.style.position="relative",i.appendChild(s),s.appendChild(this.da()),s.appendChild(this.ea())}else i.appendChild(this.da());return e.appendChild(t),this.nav.zoom=e,e},this.da=function(){var e=document.createElement("table");return e.cellPadding="0",e.cellSpacing="0",e.border="0",e.style.width="100%",e.style.border="0px none",e.style.tableLayout="fixed",this.f||(e.style.borderLeft="1px solid "+this.borderColor),this.nav.main=e,this.nav.events=e,e},this.ea=function(){var e=document.createElement("table");e.style.top="0px",e.cellPadding="0",e.cellSpacing="0",e.border="0",e.style.position="absolute",e.style.width="100%",e.style.border="0px none",e.style.tableLayout="fixed",this.nav.events=e;for(var t=this.columns,i=t.length,s=e.insertRow(-1),l=0;l<i;l++){var a=s.insertCell(-1);a.style.padding="0px",a.style.border="0px none",a.style.height="0px",a.style.overflow="visible",n.rtl||(a.style.textAlign="left");var o=document.createElement("div");o.style.marginRight=n.columnMarginRight+"px",o.style.position="relative",o.style.height="1px",this.f||(o.style.fontSize="1px",o.style.lineHeight="1.2"),o.style.marginTop="-1px";var r=document.createElement("div");a.selection=r,a.appendChild(o),a.appendChild(r)}return e},this.ca=function(){var e=document.createElement("table");if(e.cellSpacing="0",e.cellPadding="0",e.border="0",e.style.border="0px none",e.style.width=this.hourWidth+"px",e.oncontextmenu=function(){return!1},this.f?0:1){var t=e.insertRow(-1);t.style.height="1px",t.style.backgroundColor="white";var i=t.insertCell(-1);i.style.padding="0px",i.style.border="0px none"}for(var n=24,s=0;s<n;s++)this.fa(e,s);return e},this.fa=function(e,t){var i=2*this.cellHeight,n=e.insertRow(-1);n.style.height=i+"px";var l=n.insertCell(-1);l.valign="bottom",l.unselectable="on",!this.f,l.style.cursor="default",l.style.padding="0px",l.style.border="0px none";var a=document.createElement("div");a.style.position="relative",this.f&&(a.className=this.w("_rowheader")),a.style.width=this.hourWidth+"px",a.style.height=i+"px",a.style.overflow="hidden",a.unselectable="on";var o=document.createElement("div");this.f&&(o.className=this.w("_rowheader_inner")),o.unselectable="on";var r=document.createElement("div");r.unselectable="on";var h=this.startDate.addHours(t),c=h.getHours(),d=c<12,u=s.timeFormat();"Clock12Hours"===u&&(c%=12,0===c&&(c=12)),r.innerHTML=c;var v=document.createElement("span");v.unselectable="on",this.f?v.className=this.w("_rowheader_minutes"):(v.style.fontSize="10px",v.style.verticalAlign="super");var p;p="Clock12Hours"===u?d?"AM":"PM":"00",this.f?v.innerHTML=p:v.innerHTML="&nbsp;"+p,r.appendChild(v),o.appendChild(r),a.appendChild(o),l.appendChild(a)},this._=function(){switch(this.heightSpec){case"Full":return 48*this.cellHeight;case"BusinessHours":var e=this.K();return e*this.cellHeight*2;case"BusinessHoursNoScroll":var e=this.K();return e*this.cellHeight*2;default:throw"DayPilot.Calendar: Unexpected 'heightSpec' value."}},this.ga=function(){var e=n.nav.corner?n.nav.corner.parentNode:null;if(e){e.innerHTML="";var t=this.ha();e.appendChild(t),n.nav.corner=t}},this.aa=function(){var e=document.createElement("div");this.f||(e.style.borderLeft="1px solid "+this.borderColor,e.style.borderRight="1px solid "+this.borderColor),e.style.overflow="auto";var t=document.createElement("table");t.cellPadding="0",t.cellSpacing="0",t.border="0",t.style.width="100%",t.style.borderCollapse="separate",t.style.border="0px none";var i=t.insertRow(-1),n=i.insertCell(-1);n.style.padding="0px",n.style.border="0px none";var s=this.ha();n.appendChild(s),this.nav.corner=s,n=i.insertCell(-1),n.style.width="100%",!this.f,n.valign="top",n.style.position="relative",n.style.padding="0px",n.style.border="0px none",this.nav.header=document.createElement("table"),this.nav.header.cellPadding="0",this.nav.header.cellSpacing="0",this.nav.header.border="0",this.nav.header.width="100%",this.nav.header.style.tableLayout="fixed",this.f||(this.nav.header.style.borderBottom="0px none #000000",this.nav.header.style.borderRight="0px none #000000",this.nav.header.style.borderLeft="1px solid "+this.borderColor,this.nav.header.style.borderTop="1px solid "+this.borderColor),this.nav.header.oncontextmenu=function(){return!1};var l="hidden"!==this.nav.scroll.style.overflow;if(this.f||l&&(this.nav.header.style.borderRight="1px solid "+this.borderColor),n.appendChild(this.nav.header),l){n=i.insertCell(-1),n.unselectable="on",!this.f;var a=document.createElement("div");if(a.unselectable="on",a.style.position="relative",a.style.width="16px",this.f){a.style.height=this.headerHeight+"px",a.className=this.w("_cornerright");var o=document.createElement("div");o.className=this.w("_cornerright_inner"),a.appendChild(o)}else;n.appendChild(a),this.nav.cornerRight=a}return e.appendChild(t),e},this.ha=function(){var e=document.createElement("div");e.style.position="relative",this.f&&(e.className=this.w("_corner")),e.style.width=this.hourWidth+"px",e.style.height=this.headerHeight+"px",e.oncontextmenu=function(){return!1};var t=document.createElement("div");return t.unselectable="on",this.f&&(t.className=this.w("_corner_inner")),e.appendChild(t),e},this.r=function(){var e=this.nav.main;e.root=null,e.onmouseup=null;for(var t=0;t<e.rows.length;t++)for(var i=e.rows[t],n=0;n<i.cells.length;n++){var s=i.cells[n];s.root=null,s.onmousedown=null,s.onmousemove=null,s.onmouseout=null,s.onmouseup=null}this.fasterDispose||DayPilot.pu(e)},this.F=function(){var e=this.nav.main,i=18e5,s=this.L(),l=n.columns;for(e&&this.r();e&&e.rows&&e.rows.length>0;)this.fasterDispose||DayPilot.pu(e.rows[0]),e.deleteRow(0);this.tableCreated=!0;var a=l.length;if(this.f){for(var o=this.nav.events;o&&o.rows&&o.rows.length>0;)this.fasterDispose||DayPilot.pu(o.rows[0]),o.deleteRow(0);for(var a=l.length,r=o.insertRow(-1),h=0;h<a;h++){var c=r.insertCell(-1);c.style.padding="0px",c.style.border="0px none",c.style.height="0px",c.style.overflow="visible",n.rtl||(c.style.textAlign="left");var d=document.createElement("div");d.style.marginRight=n.columnMarginRight+"px",d.style.position="relative",d.style.height="1px",this.f||(d.style.fontSize="1px",d.style.lineHeight="1.2"),d.style.marginTop="-1px";var u=document.createElement("div");u.style.position="relative",c.selection=u,c.appendChild(d),c.appendChild(u)}}if(!this.f){var r=e.insertRow(-1);r.style.backgroundColor="white";for(var h=0;h<a;h++){var c=r.insertCell(-1);c.style.padding="0px",c.style.border="0px none",c.style.height="1px",c.style.overflow="visible",c.style.width=100/l.length+"%";var d=document.createElement("div");d.style.display="block",d.style.marginRight=n.columnMarginRight+"px",d.style.position="relative",d.style.height="1px",d.style.fontSize="1px",d.style.lineHeight="1.2",d.style.marginTop="-1px",c.appendChild(d)}}for(var v=0;v<s;v++){var r=(this.f?0:1,e.insertRow(-1));r.style.MozUserSelect="none",r.style.KhtmlUserSelect="none";for(var h=0;h<a;h++){var p=this.columns[h],c=r.insertCell(-1);if(c.start=p.Start.addTime(v*i),c.end=c.start.addTime(i),c.onmousedown=this.Q,c.onmouseup=function(){return!1},c.onclick=function(){return!1;
},c.root=this,c.style.padding="0px",c.style.border="0px none",c.style.verticalAlign="top",!this.f,c.style.height=n.cellHeight+"px",c.style.overflow="hidden",c.unselectable="on",this.f){var d=document.createElement("div");d.unselectable="on",d.style.height=n.cellHeight+"px",d.style.position="relative",d.className=this.w("_cell");this.ia(c.start,c.end)&&this.f&&DayPilot.Util.addClass(d,n.w("_cell_business"));var f=document.createElement("div");f.setAttribute("unselectable","on"),f.className=this.w("_cell_inner"),d.appendChild(f),c.appendChild(d)}else;c.appendChild(d)}}e.onmouseup=this.T,e.root=this,n.nav.scrollable.onmousemove=function(e){e=e||window.event;var i=n.nav.scrollable;n.coords=DayPilot.mo3(i,e);var s=DayPilot.mc(e);if(t.resizing){t.resizingShadow||(t.resizingShadow=n.u(t.resizing,!1,n.shadow));var l=n.cellHeight,a=1,o=s.y-t.originalMouse.y;if("bottom"===t.resizing.dpBorder){var r=Math.floor((t.originalHeight+t.originalTop+o+l/2)/l)*l-t.originalTop+a;r<l&&(r=l);var h=n.nav.main.clientHeight;t.originalTop+r>h&&(r=h-t.originalTop),t.resizingShadow.style.height=r+"px"}else if("top"===t.resizing.dpBorder){var c=Math.floor((t.originalTop+o-a+l/2)/l)*l+a;c<a&&(c=a),c>t.originalTop+t.originalHeight-l&&(c=t.originalTop+t.originalHeight-l);var r=t.originalHeight-(c-t.originalTop);r<l?r=l:t.resizingShadow.style.top=c+"px",t.resizingShadow.style.height=r+"px"}}else if(t.moving){if(t.movingShadow||(t.movingShadow=n.u(t.moving,!n.h,n.shadow),t.movingShadow.style.width=t.movingShadow.parentNode.offsetWidth+1+"px"),!n.coords)return;var l=n.cellHeight,a=1,d=t.moveOffsetY;d||(d=l/2);var c=Math.floor((n.coords.y-d-a+l/2)/l)*l+a;c<a&&(c=a);var u=n.nav.events,h=n.nav.main.clientHeight,v=parseInt(t.movingShadow.style.height);c+v>h&&(c=h-v),t.movingShadow.parentNode.style.display="none",t.movingShadow.style.top=c+"px",t.movingShadow.parentNode.style.display="";var p=u.clientWidth/u.rows[0].cells.length,f=Math.floor((n.coords.x-45)/p);f<0&&(f=0),f<u.rows[0].cells.length&&f>=0&&t.movingShadow.column!==f&&(t.movingShadow.column=f,t.moveShadow(u.rows[0].cells[f]))}else if(t.selecting){var s=DayPilot.mc(e||window.event),g=n.V.getCellCoords(),m=t.column,y=n.nav.main.rows[g.y].cells[m];s.y<t.firstMousePos.y?(t.selectedCells=t.getCellsBelow(y),t.topSelectedCell=t.selectedCells[0],t.bottomSelectedCell=t.firstSelected):(t.selectedCells=t.getCellsAbove(y),t.topSelectedCell=t.firstSelected,t.bottomSelectedCell=t.selectedCells[0]),n.R()}},n.nav.scrollable.style.display=""},this.ia=function(e,t){return this.businessBeginsHour<this.businessEndsHour?!(e.getHours()<this.businessBeginsHour||e.getHours()>=this.businessEndsHour||6===e.getDayOfWeek()||0===e.getDayOfWeek()):e.getHours()>=this.businessBeginsHour||e.getHours()<this.businessEndsHour},this.s=function(){var e=this.nav.header;if(e&&e.rows)for(var t=0;t<e.rows.length;t++)for(var i=e.rows[t],n=0;n<i.cells.length;n++){var s=i.cells[n];s.onclick=null,s.onmousemove=null,s.onmouseout=null}this.fasterDispose||DayPilot.pu(e)},this.ja=function(e){for(var t=e?this.nav.header.insertRow(-1):this.nav.header.rows[0],i=this.columns,s=i.length,l=0;l<s;l++){var a=i[l],o=e?t.insertCell(-1):t.cells[l];o.data=a,o.style.overflow="hidden",o.style.padding="0px",o.style.border="0px none",o.style.height=this.headerHeight+"px";var r=e?document.createElement("div"):o.firstChild;if(e){r.unselectable="on",r.style.MozUserSelect="none",r.style.backgroundColor=a.BackColor,r.style.cursor="default",r.style.position="relative",this.f&&(r.className=n.w("_colheader")),r.style.height=this.headerHeight+"px";var h=document.createElement("div");this.f?h.className=n.w("_colheader_inner"):(h.style.position="absolute",h.style.left="0px",h.style.width="100%",h.style.padding="2px",r.style.textAlign="center"),h.unselectable="on",r.appendChild(h),o.appendChild(r)}var h=r.firstChild;h.innerHTML=a.InnerHTML}},this.ka=function(){return this.width&&this.width.indexOf("px")!==-1?"Pixel":"Percentage"},this.E=function(){var e=this.nav.header,t=!0,i=this.columns;for(i.length;this.headerCreated&&e&&e.rows&&e.rows.length>0;)this.fasterDispose||DayPilot.pu(e.rows[0]),e.deleteRow(0);this.headerCreated=!0;this.ja(t)},this.loadingStart=function(){this.loadingLabelVisible&&(this.nav.loading.innerHTML=this.loadingLabelText,this.nav.loading.style.top=this.headerHeight+5+"px",this.nav.loading.style.display="")},this.commandCallBack=function(e,t){var i={};i.command=e,this.n("Command",t,i)},this.loadingStop=function(e){this.callbackTimeout&&window.clearTimeout(this.callbackTimeout),this.nav.loading.style.display="none"},this.la=function(){var e=this.nav.scroll;e.onscroll||(e.onscroll=function(){n.ma()});var t="undefined"!=typeof this.na.scrollpos?this.na.scrollpos:this.initScrollPos;t&&("Auto"===t&&(t="BusinessHours"===this.heightSpec?2*this.cellHeight*this.businessBeginsHour:0),e.root=this,0===e.scrollTop&&(e.scrollTop=t))},this.callbackError=function(e,t){alert("Error!\r\nResult: "+e+"\r\nContext:"+t)},this.oa=function(){var e=DayPilot.sw(this.nav.scroll),t=this.nav.cornerRight;t&&e>0&&(this.f?t.style.width=e+"px":t.style.width=e-3+"px")},this.pa=function(){t.globalHandlers||(t.globalHandlers=!0,DayPilot.re(document,"mouseup",t.gMouseUp),DayPilot.re(window,"unload",t.gUnload))},this.events={},this.events.add=function(e){var t=null;if(e instanceof DayPilot.Event)t=e.data;else{if("object"!=typeof e)throw"DayPilot.Calendar.events.add() expects an object or DayPilot.Event instance.";t=e}n.events.list||(n.events.list=[]),n.events.list.push(t),n.update(),n.O.notify()},this.events.find=function(e){for(var t=0;t<n.events.list.length;t++){var i=n.events.list[t];if(i.id===e)return new DayPilot.Event(i,n)}return null},this.events.update=function(e){if(e instanceof DayPilot.Event)e.commit();else if("object"==typeof e){var t=n.events.find(e.id);if(t){var i=DayPilot.indexOf(n.events.list,t.data);n.events.list.splice(i,1,e)}}n.update(),n.O.notify()},this.events.remove=function(e){var t;if(e instanceof DayPilot.Event)t=e.data;else if("object"==typeof e){var i=n.events.find(e.id);i&&(t=i.data)}else if("string"==typeof e||"number"==typeof e){var i=n.events.find(e);i&&(t=i.data)}var s=DayPilot.indexOf(n.events.list,t);n.events.list.splice(s,1),n.update(),n.O.notify()},this.events.load=function(e,t,i){var s=function(e){var t={};t.exception=e.exception,t.request=e.request,"function"==typeof i&&i(t)},l=function(e){var i,l=e.request;try{i=JSON.parse(l.responseText)}catch(e){var a={};return a.exception=e,void s(a)}if(DayPilot.isArray(i)){var o={};if(o.preventDefault=function(){this.preventDefault.value=!0},o.data=i,"function"==typeof t&&t(o),o.preventDefault.value)return;n.events.list=i,n.qa&&n.update()}};if(n.eventsLoadMethod&&"POST"===n.eventsLoadMethod.toUpperCase())DayPilot.Http.ajax({"method":"POST","data":{"start":n.visibleStart().toString(),"end":n.visibleEnd().toString()},"url":e,"success":l,"error":s});else{var a=e,o="start="+n.visibleStart().toString()+"&end="+n.visibleEnd().toString();a+=a.indexOf("?")>-1?"&"+o:"?"+o,DayPilot.Http.ajax({"method":"GET","url":a,"success":l,"error":s})}},this.update=function(){n.ra(),n.sa(),n.q(),n.nav.top.style.cursor="auto";n.B(),n.E(),n.F(),n.G(),n.H(),n.ga(),n.ta(),n.C(),n.D(),n.A(),n.I(),n.clearSelection(),this.visible?this.show():this.hide()},this.ua=function(){if(this.id&&this.id.tagName)this.nav.top=this.id;else{if("string"!=typeof this.id)throw"DayPilot.Calendar() constructor requires the target element or its ID as a parameter";if(this.nav.top=document.getElementById(this.id),!this.nav.top)throw"DayPilot.Calendar: The placeholder element not found: '"+e+"'."}},this.va={},this.va.events=[],this.wa=function(e){var t=this.va.events,i=this.events.list[e],n={};for(var s in i)n[s]=i[s];if("function"==typeof this.onBeforeEventRender){var l={};l.data=n,this.onBeforeEventRender(l)}t[e]=n},this.C=function(){var e=this.events.list;if(n.va.events=[],e){var t=e.length,i=864e5;this.cache.pixels={};var s=[];this.scrollLabels=[],this.minStart=1e4,this.maxEnd=0;for(var l=0;l<t;l++){var a=e[l];a.start=new DayPilot.Date(a.start),a.end=new DayPilot.Date(a.end)}if("function"==typeof this.onBeforeEventRender)for(var l=0;l<t;l++)this.wa(l);for(var l=0;l<this.columns.length;l++){var o={};o.minEnd=1e6,o.maxStart=-1,this.scrollLabels.push(o);var r=this.columns[l];r.events=[],r.lines=[],r.blocks=[];for(var h=new DayPilot.Date(r.Start),c=h.getTime(),d=h.addTime(i),u=d.getTime(),v=0;v<t;v++)if(!s[v]){var a=e[v],p=a.start,f=a.end,g=p.getTime(),m=f.getTime();if(!(m<g)){var y=!(m<=c||g>=u);if(y){var b=new DayPilot.Event(a,n);b.part.dayIndex=l,b.part.start=c<g?a.start:h,b.part.end=u>m?a.end:d;var w=this.getPixels(b.part.start,r.Start),C=this.getPixels(b.part.end,r.Start),S=w.top,x=C.top;if(S===x&&(w.cut||C.cut))continue;var D=C.boxBottom;b.part.top=Math.floor(S/this.cellHeight)*this.cellHeight+1,b.part.height=Math.max(Math.ceil(D/this.cellHeight)*this.cellHeight-b.part.top,this.cellHeight-1)+1,b.part.barTop=Math.max(S-b.part.top-1,0),b.part.barHeight=Math.max(x-S-2,1);var p=b.part.top,f=b.part.top+b.part.height;p>o.maxStart&&(o.maxStart=p),f<o.minEnd&&(o.minEnd=f),p<this.minStart&&(this.minStart=p),f>this.maxEnd&&(this.maxEnd=f),r.events.push(b),"function"==typeof this.onBeforeEventRender&&(b.cache=this.va.events[v]),b.part.start.getTime()===g&&b.part.end.getTime()===m&&(s[v]=!0)}}}}for(var l=0;l<this.columns.length;l++){var r=this.columns[l];r.events.sort(this.xa);for(var v=0;v<r.events.length;v++){var a=r.events[v];r.putIntoBlock(a)}for(var v=0;v<r.blocks.length;v++){var k=r.blocks[v];k.events.sort(this.xa);for(var H=0;H<k.events.length;H++){var a=k.events[H];k.putIntoLine(a)}}}}},this.xa=function(e,t){if(!(e&&t&&e.start&&t.start))return 0;var i=e.start().getTime()-t.start().getTime();return 0!==i?i:t.end().getTime()-e.end().getTime()},this.debug=function(e,t){this.debuggingEnabled&&(n.debugMessages||(n.debugMessages=[]),n.debugMessages.push(e),"undefined"!=typeof console&&console.log(e))},this.getPixels=function(e,t){t||(t=this.startDate);var i=t.getTime(),n=e.getTime(),s=this.cache.pixels[n+"_"+i];if(s)return s;i=t.getTime();var l=18e5,a=n-i,o=a%l,r=a-o,h=r+l;0===o&&(h=r);var c={};return c.cut=!1,c.top=this.ya(a),c.boxTop=this.ya(r),c.boxBottom=this.ya(h),this.cache.pixels[n+"_"+i]=c,c},this.ya=function(e){return Math.floor(this.cellHeight*e/18e5)},this.sa=function(){this.startDate=new DayPilot.Date(this.startDate).getDatePart()},this.D=function(){this.nav.corner&&(this.nav.corner.style.height=this.headerHeight+"px")},this.H=function(){var e=this._();this.nav.scroll&&e>0&&(this.nav.scroll.style.height=e+"px")},this.O={},this.O.scope=null,this.O.notify=function(){n.O.scope&&n.O.scope["$apply"]()},this.O.apply=function(e){e()},this.ma=function(){var e=n.nav.scroll.scrollTop,t=e/(2*n.cellHeight);n.na.scrollHour=t},this.ta=function(){var e=0;n.na.scrollHour?e=2*n.cellHeight*n.na.scrollHour:"Auto"===n.initScrollPos&&(e="BusinessHours"===this.heightSpec?2*this.cellHeight*this.businessBeginsHour:0),n.nav.scroll.scrollTop=e},this.za=function(){return!(!this.backendUrl&&"function"!=typeof WebForm_DoCallback)&&("undefined"==typeof n.events.list||!n.events.list)},this.A=function(){"hidden"===this.nav.top.style.visibility&&(this.nav.top.style.visibility="visible")},this.show=function(){n.visible=!0,n.nav.top.style.display=""},this.hide=function(){n.visible=!1,n.nav.top.style.display="none"},this.Aa=function(){this.sa(),this.B(),this.$(),this.E(),this.F(),this.oa(),this.la(),this.pa(),t.register(this),this.Ba(),this.n("Init")},this.na={},this.Ca=function(){this.na.themes=[],this.na.themes.push(this.theme||this.cssClassPrefix)},this.Da=function(){for(var e=this.na.themes,t=0;t<e.length;t++){var i=e[t];DayPilot.Util.removeClass(this.nav.top,i+"_main")}this.na.themes=[]},this.Ea=function(){if(this.afterRender(null,!1),"function"==typeof this.onAfterRender){var e={};e.isCallBack=!1,this.onAfterRender(e)}},this.Fa=function(){if("function"==typeof this.onInit&&!this.Ga){this.Ga=!0;var e={};this.onInit(e)}},this.ra=function(){n.f||(n.f=!0,window.console&&window.console.log&&window.console.log("DayPilot: cssOnly = false mode is not supported anymore."))},this.Ha=function(){var e=n.nav.top;return e.offsetWidth>0&&e.offsetHeight>0},this.Ba=function(){var e=n.Ha;e()||(n.Ia=setInterval(function(){e()&&(n.la(),n.oa(),clearInterval(n.Ia))},100))},this.init=function(){this.ua();var e=this.za();return this.ra(),this.Ca(),e?void this.Aa():(this.sa(),this.B(),this.C(),this.$(),this.E(),this.F(),this.A(),this.oa(),this.la(),this.pa(),t.register(this),this.events&&(this.D(),this.I()),this.Ea(),this.Fa(),this.Ba(),void(this.qa=!0))},this.Init=this.init},t.Cell=function(e,t,i){this.start=e,this.end=t,this.column=function(){}},t.Column=function(e,t,i){this.value=e,this.name=t,this.date=new DayPilot.Date(i)},DayPilot.Calendar=t.Calendar,"undefined"!=typeof jQuery&&!function(e){e.fn.daypilotCalendar=function(e){var t=null,i=this.each(function(){if(!this.daypilot){var i=new DayPilot.Calendar(this.id);this.daypilot=i;for(name in e)i[name]=e[name];i.init(),t||(t=i)}});return 1===this.length?t:i}}(jQuery),function(){var e=DayPilot.am();e&&e.directive("daypilotCalendar",["$parse",function(e){return{"restrict":"E","template":"<div></div>","replace":!0,"link":function(t,i,n){var s=new DayPilot.Calendar(i[0]);s.O.scope=t,s.init();var l=n["id"];l&&(t[l]=s);var a=n["publishAs"];if(a){(0,e(a).assign)(t,s)}for(var o in n)0===o.indexOf("on")&&!function(i){s[i]=function(s){var l=e(n[i]);t["$apply"](function(){l(t,{"args":s})})}}(o);var r=t["$watch"],h=n["config"]||n["daypilotConfig"],c=n["events"]||n["daypilotEvents"];r.call(t,h,function(e){for(var t in e)s[t]=e[t];s.update(),s.Fa()},!0),r.call(t,c,function(e){s.events.list=e,s.update()},!0)}}}])}()}}();